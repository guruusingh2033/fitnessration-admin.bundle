{"version":3,"sources":["meteor://ðŸ’»app/imports/components/add-ons/add/controller.js","meteor://ðŸ’»app/imports/components/add-ons/add/template.html","meteor://ðŸ’»app/imports/components/add-ons/edit/controller.js","meteor://ðŸ’»app/imports/components/add-ons/edit/template.html","meteor://ðŸ’»app/imports/components/add-ons/form/controller.js","meteor://ðŸ’»app/imports/components/add-ons/form/template.html","meteor://ðŸ’»app/imports/components/add-ons/list/controller.js","meteor://ðŸ’»app/imports/components/add-ons/list/template.html","meteor://ðŸ’»app/imports/components/add-ons/helpers.js","meteor://ðŸ’»app/imports/components/anomaly-triggers/add/controller.js","meteor://ðŸ’»app/imports/components/anomaly-triggers/add/template.html","meteor://ðŸ’»app/imports/components/anomaly-triggers/edit/controller.js","meteor://ðŸ’»app/imports/components/anomaly-triggers/edit/template.html","meteor://ðŸ’»app/imports/components/anomaly-triggers/form/controller.js","meteor://ðŸ’»app/imports/components/anomaly-triggers/form/template.html","meteor://ðŸ’»app/imports/components/anomaly-triggers/list/controller.js","meteor://ðŸ’»app/imports/components/anomaly-triggers/list/template.html","meteor://ðŸ’»app/imports/components/anomaly-triggers/helpers.js","meteor://ðŸ’»app/imports/components/bundle-types/add/controller.js","meteor://ðŸ’»app/imports/components/bundle-types/add/template.html","meteor://ðŸ’»app/imports/components/bundle-types/edit/controller.js","meteor://ðŸ’»app/imports/components/bundle-types/edit/template.html","meteor://ðŸ’»app/imports/components/bundle-types/form/controller.js","meteor://ðŸ’»app/imports/components/bundle-types/form/template.html","meteor://ðŸ’»app/imports/components/bundle-types/list/controller.js","meteor://ðŸ’»app/imports/components/bundle-types/list/template.html","meteor://ðŸ’»app/imports/components/bundle-types/helpers.js","meteor://ðŸ’»app/imports/components/ingredients/add/controller.js","meteor://ðŸ’»app/imports/components/ingredients/add/template.html","meteor://ðŸ’»app/imports/components/ingredients/edit/controller.js","meteor://ðŸ’»app/imports/components/ingredients/edit/template.html","meteor://ðŸ’»app/imports/components/ingredients/form/controller.js","meteor://ðŸ’»app/imports/components/ingredients/form/template.html","meteor://ðŸ’»app/imports/components/ingredients/list/controller.js","meteor://ðŸ’»app/imports/components/ingredients/list/template.html","meteor://ðŸ’»app/imports/components/ingredients/helpers.js","meteor://ðŸ’»app/imports/components/meal-plans/add/controller.js","meteor://ðŸ’»app/imports/components/meal-plans/add/template.html","meteor://ðŸ’»app/imports/components/meal-plans/edit/controller.js","meteor://ðŸ’»app/imports/components/meal-plans/edit/template.html","meteor://ðŸ’»app/imports/components/meal-plans/form/controller.js","meteor://ðŸ’»app/imports/components/meal-plans/form/template.html","meteor://ðŸ’»app/imports/components/meal-plans/list/controller.js","meteor://ðŸ’»app/imports/components/meal-plans/list/template.html","meteor://ðŸ’»app/imports/components/meal-plans/helpers.js","meteor://ðŸ’»app/imports/components/meals/add/controller.js","meteor://ðŸ’»app/imports/components/meals/add/template.html","meteor://ðŸ’»app/imports/components/meals/edit/controller.js","meteor://ðŸ’»app/imports/components/meals/edit/template.html","meteor://ðŸ’»app/imports/components/meals/form/controller.js","meteor://ðŸ’»app/imports/components/meals/form/template.html","meteor://ðŸ’»app/imports/components/meals/list/controller.js","meteor://ðŸ’»app/imports/components/meals/list/template.html","meteor://ðŸ’»app/imports/components/meals/helpers.js","meteor://ðŸ’»app/imports/components/orders/add/controller.js","meteor://ðŸ’»app/imports/components/orders/add/template.html","meteor://ðŸ’»app/imports/components/orders/list/controller.js","meteor://ðŸ’»app/imports/components/orders/list/template.html","meteor://ðŸ’»app/imports/components/orders/view/controller.js","meteor://ðŸ’»app/imports/components/orders/view/template.html","meteor://ðŸ’»app/imports/components/partners/add/controller.js","meteor://ðŸ’»app/imports/components/partners/add/template.html","meteor://ðŸ’»app/imports/components/partners/edit/controller.js","meteor://ðŸ’»app/imports/components/partners/edit/template.html","meteor://ðŸ’»app/imports/components/partners/form/controller.js","meteor://ðŸ’»app/imports/components/partners/form/template.html","meteor://ðŸ’»app/imports/components/partners/list/controller.js","meteor://ðŸ’»app/imports/components/partners/list/template.html","meteor://ðŸ’»app/imports/components/partners/helpers.js","meteor://ðŸ’»app/imports/components/portions/add/controller.js","meteor://ðŸ’»app/imports/components/portions/add/template.html","meteor://ðŸ’»app/imports/components/portions/edit/controller.js","meteor://ðŸ’»app/imports/components/portions/edit/template.html","meteor://ðŸ’»app/imports/components/portions/form/controller.js","meteor://ðŸ’»app/imports/components/portions/form/template.html","meteor://ðŸ’»app/imports/components/portions/list/controller.js","meteor://ðŸ’»app/imports/components/portions/list/template.html","meteor://ðŸ’»app/imports/components/portions/helpers.js","meteor://ðŸ’»app/imports/components/promotions/add/controller.js","meteor://ðŸ’»app/imports/components/promotions/add/template.html","meteor://ðŸ’»app/imports/components/promotions/edit/controller.js","meteor://ðŸ’»app/imports/components/promotions/edit/template.html","meteor://ðŸ’»app/imports/components/promotions/form/controller.js","meteor://ðŸ’»app/imports/components/promotions/form/template.html","meteor://ðŸ’»app/imports/components/promotions/list/controller.js","meteor://ðŸ’»app/imports/components/promotions/list/template.html","meteor://ðŸ’»app/imports/components/promotions/helpers.js","meteor://ðŸ’»app/imports/components/sides/add/controller.js","meteor://ðŸ’»app/imports/components/sides/add/template.html","meteor://ðŸ’»app/imports/components/sides/edit/controller.js","meteor://ðŸ’»app/imports/components/sides/edit/template.html","meteor://ðŸ’»app/imports/components/sides/form/controller.js","meteor://ðŸ’»app/imports/components/sides/form/template.html","meteor://ðŸ’»app/imports/components/sides/list/controller.js","meteor://ðŸ’»app/imports/components/sides/list/template.html","meteor://ðŸ’»app/imports/components/users/list/controller.js","meteor://ðŸ’»app/imports/components/users/list/template.html","meteor://ðŸ’»app/imports/components/users/view/controller.js","meteor://ðŸ’»app/imports/components/users/view/template.html","meteor://ðŸ’»app/imports/components/admin/controller.js","meteor://ðŸ’»app/imports/components/admin/template.html","meteor://ðŸ’»app/imports/components/fulfillment-capacity/controller.js","meteor://ðŸ’»app/imports/components/fulfillment-capacity/template.html","meteor://ðŸ’»app/imports/components/fulfillment-charges/controller.js","meteor://ðŸ’»app/imports/components/fulfillment-charges/template.html","meteor://ðŸ’»app/imports/components/fulfillment-schedule/controller.js","meteor://ðŸ’»app/imports/components/fulfillment-schedule/template.html","meteor://ðŸ’»app/imports/components/fulfillment-settings/controller.js","meteor://ðŸ’»app/imports/components/fulfillment-settings/template.html","meteor://ðŸ’»app/imports/components/inventory-status/controller.js","meteor://ðŸ’»app/imports/components/inventory-status/template.html","meteor://ðŸ’»app/imports/api/addOns.js","meteor://ðŸ’»app/imports/api/anomalyTriggers.js","meteor://ðŸ’»app/imports/api/blocks.js","meteor://ðŸ’»app/imports/api/bundleTypes.js","meteor://ðŸ’»app/imports/api/deleted.js","meteor://ðŸ’»app/imports/api/fulfillmentSettings.js","meteor://ðŸ’»app/imports/api/ingredients.js","meteor://ðŸ’»app/imports/api/locationSurcharges.js","meteor://ðŸ’»app/imports/api/mealPlans.js","meteor://ðŸ’»app/imports/api/mealStock.js","meteor://ðŸ’»app/imports/api/meals.js","meteor://ðŸ’»app/imports/api/orders.js","meteor://ðŸ’»app/imports/api/partners.js","meteor://ðŸ’»app/imports/api/portions.js","meteor://ðŸ’»app/imports/api/promotions.js","meteor://ðŸ’»app/imports/api/sides.js","meteor://ðŸ’»app/imports/api/stockCache.js","meteor://ðŸ’»app/imports/api/surveys.js","meteor://ðŸ’»app/imports/api/timeSlots.js","meteor://ðŸ’»app/imports/client/EditGuards.js","meteor://ðŸ’»app/imports/client/mongoProperty.js","meteor://ðŸ’»app/imports/AdminComponent.js","meteor://ðŸ’»app/imports/ListAdminComponent.js","meteor://ðŸ’»app/imports/StockCalculator.js","meteor://ðŸ’»app/imports/date.ts","meteor://ðŸ’»app/imports/helpers.js","meteor://ðŸ’»app/imports/pages.js","meteor://ðŸ’»app/client/main.html.js","meteor://ðŸ’»app/client/main.js"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\n[ AddOns ] = AdminComponent.collections('AddOns');\n\nclass AddAddOnCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.$timeout = $timeout;\n    this.newAddOn = {\n      images: [],\n      variants: []\n    };\n\t}\n\tsave(addOn) {\n    var addOnId = AddOns.insert(resolve(addOn));\n    FlowRouter.go('editAddOn', { addOnId: addOnId._str });\n\t}\n}\n\nexport default angular.module('add-add-on', [\n  angularMeteor,\n  form.name\n])\n  .component('addaddon', {\n    templateUrl: template,\n    controller: AddAddOnCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/add-ons/add/template.html\";\n      var template = \"<addonform add-on=\\\"$ctrl.newAddOn\\\" on-save=\\\"$ctrl.save(addOn)\\\"></addonform>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { AddOns } from '../../../api/addOns';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\n\nclass EditAddOn extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('addOns');\n    this.helpers({\n    \taddOn() {\n    \t\treturn _.cloneDeep(AddOns.findOne({_id:new Mongo.ObjectID(this.addOnId)}));\n    \t}\n    });\n    this.$timeout = $timeout;\n\t}\n\tsave(addOn) {\n\t\tAddOns.update({_id:new Mongo.ObjectID(this.addOnId)}, {$set:resolve(addOn)});\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n\t}\n}\n\nexport default angular.module('edit-add-on', [\n  angularMeteor,\n  form.name\n])\n  .component('editaddon', {\n    templateUrl: template,\n    controller: EditAddOn,\n    bindings: {\n    \taddOnId: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/add-ons/edit/template.html\";\n      var template = \"<addonform add-on=\\\"$ctrl.addOn\\\" on-save=\\\"$ctrl.save(addOn)\\\"></addonform> <p class=\\\"saved\\\" ng-if=\\\"$ctrl.saved\\\">Saved.</p> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nclass AddOnFormCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n    console.log(this.addOn);\n\t}\n\n\tsave() {\n\t\tthis.onSave({addOn:this.addOn});\n\t}\n\n  removeImage(image) {\n    _.pull(this.addOn.images, image);\n  }\n\n  addImage(image) {\n    this.addOn.images.push(image);\n  }\n\n  removeVariant(index) {\n    this.addOn.variants.splice(index, 1);\n  }\n\n  addVariant() {\n    this.addOn.variants.push(this.newVariant);\n    this.newVariant = null;\n  }\n}\n\nexport default angular.module('add-on-form', [\n  angularMeteor\n])\n  .component('addonform', {\n    templateUrl: template,\n    controller: AddOnFormCtrl,\n    bindings: {\n    \taddOn: '<',\n      onSave: '&',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/add-ons/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save(); false\\\" ng-model-options=\\\"{ updateOn: 'blur' }\\\"> <div class=\\\"-section images\\\"> <ul> <li ng-repeat=\\\"image in $ctrl.addOn.images\\\"> <img src=\\\"{{image}}\\\"> <button class=\\\"-button delete\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.removeImage(image)\\\">Delete</button> </li> </ul> <input type=\\\"file\\\" upload=\\\"$ctrl.addImage(url)\\\"> </div> <div class=\\\"--cont\\\"> <div class=\\\"-field\\\"> <label>Name</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.addOn.name\\\" required> </div> <div class=\\\"-field\\\"> <label>Variant Type</label> <select class=\\\"-input\\\" ng-model=\\\"$ctrl.addOn.variantType\\\"> <option></option> <option value=\\\"colour\\\">Colour</option> <option value=\\\"variant\\\">Variant</option> </select> </div> <div class=\\\"-field\\\"> <label>SKU</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.addOn.sku\\\" required> </div> <div class=\\\"-field\\\"> <label>Description</label> <textarea class=\\\"-input\\\" ng-model=\\\"$ctrl.addOn.description\\\" required></textarea> </div> <div class=\\\"-field\\\"> <label>Specifications</label> <textarea class=\\\"-input\\\" ng-model=\\\"$ctrl.addOn.specifications\\\" required></textarea> </div> <div class=\\\"-field\\\"> <label>Price</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.addOn.price\\\" required> </div> <div class=\\\"-section variants\\\"> <h2>Variants</h2> <ul class=\\\"-items\\\"> <li ng-repeat=\\\"variant in $ctrl.addOn.variants\\\"> <div class=\\\"-field\\\"> <label>Name</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.addOn.variants[$index]\\\" placeholder=\\\"\\\"> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button delete\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.removeVariant($index)\\\">Delete</button> </div> </li> <li> <div class=\\\"-field\\\"> <label>Name</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.newVariant\\\"> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button add\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.addVariant()\\\">Add</button> </div> </li> </ul> </div> <button class=\\\"-button save\\\">Save</button> </div> </form> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\n\nclass AddOnsCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive, {\n      uses: ['addOns']\n    });\n\t}\n  get collection() { return 'AddOns'; }\n  get documents() { return this.addOns; }\n}\n\nexport default angular.module('add-ons', [\n  angularMeteor\n])\n  .component('addons', {\n    templateUrl: template,\n    controller: AddOnsCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/add-ons/list/template.html\";\n      var template = \"<div class=\\\"--top\\\"> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <a class=\\\"-button add\\\" href=\\\"/products/add-ons/add\\\">Add</a> </div> <table class=\\\"-entry-list\\\"> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th>Icon</th> <th>Name</th> <th>SKU</th> <th>Variant Type</th> <th>Variants</th> <th>Price</th> <th>Description</th> <th>Specifications</th> <th></th> </tr> <tr ng-repeat=\\\"addOn in $ctrl.addOns\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[addOn._id._str]\\\" type=\\\"checkbox\\\"></td> <td><img src=\\\"{{addOn.images[0]}}\\\"></td> <td>{{addOn.name}}</td> <td>{{addOn.sku}}</td> <td>{{addOn.variantType}}</td> <td> <ul> <li ng-repeat=\\\"variant in addOn.variants\\\">{{variant}}</li> </ul> </td> <td>{{addOn.price | currency}}</td> <td>{{addOn.description}}</td> <td>{{addOn.specifications}}</td> <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/products/add-ons/{{addOn._id._str}}/edit\\\">Edit</a></td> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","export function resolve(addOn) {\n\treturn {\n\t\tname: addOn.name,\n\t\tsku: addOn.sku,\n\t\tdescription: addOn.description,\n\t\tspecifications: addOn.specifications,\n\t\tvariantType: addOn.variantType,\n\t\tprice: parseFloat(addOn.price),\n\t\timages: addOn.images,\n\t\tvariants: addOn.variants,\n\t};\n}\n","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\nimport { AnomalyTriggers } from '../../../api/anomalyTriggers';\n_ = lodash;\n\nclass AddAnomalyTriggerCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.$timeout = $timeout;\n    this.newAnomalyTrigger = {};\n\t}\n\tsave(anomalyTrigger) {\n    AnomalyTriggers.insert(resolve(anomalyTrigger));\n    this.newAnomalyTrigger = {};\n\t}\n}\n\nexport default angular.module('add-anomaly-trigger', [\n  angularMeteor,\n  form.name\n])\n  .component('addanomalytrigger', {\n    templateUrl: template,\n    controller: AddAnomalyTriggerCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/anomaly-triggers/add/template.html\";\n      var template = \"<anomalytriggerform add-button=\\\"true\\\" anomaly-trigger=\\\"$ctrl.newAnomalyTrigger\\\" on-save=\\\"$ctrl.save(anomalyTrigger)\\\"></anomalytriggerform> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\nimport { AnomalyTriggers } from '../../../api/anomalyTriggers';\n_ = lodash;\n\nclass EditAnomalyTriggerCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['anomalyTriggers'],\n      helpers: {\n        anomalyTrigger() {\n          return _.mapValues(_.cloneDeep(AnomalyTriggers.findOne({_id:new Mongo.ObjectID(this.anomalyTriggerId)})), (value, key, object) => {\n\n            if (object.productType == 'addOn') {\n              switch (key) {\n                case 'addOn':\n                  if (!value) {\n                    return {_str:'all'};\n                  }\n                  break;\n              }\n            }\n            else if (object.productType == 'meal') {\n              switch (key) {\n                case 'meal':\n                  if (!value) {\n                    return 'all';\n                  }\n                  break;\n                case 'mealPlan':\n                case 'portion':\n                  if (!value) {\n                    return {_str:'all'};\n                  }\n                  break;\n              }\n            }\n            return value;\n          });\n        }\n      }\n    });\n    this.$timeout = $timeout;\n\t}\n  delete() {\n    AnomalyTriggers.remove({_id:new Mongo.ObjectID(this.anomalyTriggerId)});\n  }\n\tsave(anomalyTrigger) {\n    AnomalyTriggers.update({_id:new Mongo.ObjectID(this.anomalyTriggerId)}, {$set:resolve(anomalyTrigger)});\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n\t}\n}\n\nexport default angular.module('edit-anomaly-trigger', [\n  angularMeteor,\n  form.name\n])\n  .component('editanomalytrigger', {\n    templateUrl: template,\n    controller: EditAnomalyTriggerCtrl,\n    bindings: {\n      anomalyTriggerId: '<',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/anomaly-triggers/edit/template.html\";\n      var template = \"<anomalytriggerform show-delete=\\\"true\\\" anomaly-trigger=\\\"$ctrl.anomalyTrigger\\\" on-delete=\\\"$ctrl.delete(anomalyTrigger)\\\" on-save=\\\"$ctrl.save(anomalyTrigger)\\\"></anomalytriggerform> <p ng-if=\\\"$ctrl.saved\\\">Saved</p>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nclass AnomalyTriggerFormCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive, {\n      uses: ['mealPlans', 'portions', 'meals', 'addOns']\n    });\n\t}\n  delete() {\n    this.onDelete({anomalyTrigger:this.anomalyTrigger});\n  }\n\tsave() {\n\t\tthis.onSave({anomalyTrigger:this.anomalyTrigger});\n\t}\n}\n\nexport default angular.module('anomaly-trigger-form', [\n  angularMeteor\n])\n  .filter('mealNames', function() {\n    return (meals) => {\n      return _.transform(meals, (mealNames, meal) => {\n        if (!_.includes(mealNames, meal.name)) {\n          mealNames.push(meal.name);\n        }\n      });\n    }\n  })\n  .component('anomalytriggerform', {\n    templateUrl: template,\n    controller: AnomalyTriggerFormCtrl,\n    bindings: {\n    \tanomalyTrigger: '=',\n      onSave: '&',\n      onDelete: '&',\n      showDelete: '<',\n      addButton: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/anomaly-triggers/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save(); false\\\"> <div class=\\\"--cont\\\"> <div class=\\\"-field\\\"> <label>Product Type</label> <select ng-model=\\\"$ctrl.anomalyTrigger.productType\\\" required> <option></option> <option value=\\\"meal\\\">Meal</option> <option value=\\\"addOn\\\">Add-on</option> </select> </div> <div ng-if=\\\"$ctrl.anomalyTrigger.productType == 'meal'\\\"> <div class=\\\"-field\\\"> <label>Meal</label> <select ng-model=\\\"$ctrl.anomalyTrigger.meal\\\" required> <option></option> <option value=\\\"all\\\">All</option> <option ng-repeat=\\\"mealName in $ctrl.meals | mealNames\\\" value=\\\"{{mealName}}\\\">{{mealName}}</option> </select> </div> <div class=\\\"-field\\\"> <label>Meal Plan</label> <select ng-model=\\\"$ctrl.anomalyTrigger.mealPlan._str\\\" required> <option></option> <option value=\\\"all\\\">All</option> <option ng-repeat=\\\"mealPlan in $ctrl.mealPlans\\\" value=\\\"{{mealPlan._id._str}}\\\">{{mealPlan.name}}</option> </select> </div> <div class=\\\"-field\\\"> <label>Portion</label> <select ng-model=\\\"$ctrl.anomalyTrigger.portion._str\\\" required> <option></option> <option value=\\\"all\\\">All</option> <option ng-repeat=\\\"portion in $ctrl.portions\\\" value=\\\"{{portion._id._str}}\\\">{{portion.name}}</option> </select> </div> </div> <div ng-if=\\\"$ctrl.anomalyTrigger.productType == 'addOn'\\\"> <div class=\\\"-field\\\"> <label>Add-on</label> <select ng-model=\\\"$ctrl.anomalyTrigger.addOn._str\\\" required> <option></option> <option value=\\\"all\\\">All</option> <option ng-repeat=\\\"addOn in $ctrl.addOns\\\" value=\\\"{{addOn._id._str}}\\\">{{addOn.name}}</option> </select> </div> </div> <div class=\\\"-field\\\"> <label>Trigger limit per order</label> <input type=\\\"text\\\" ng-model=\\\"$ctrl.anomalyTrigger.quantity\\\" required> </div> <div class=\\\"-field\\\"> <label>Order fulfillment delay</label> <input type=\\\"text\\\" ng-model=\\\"$ctrl.anomalyTrigger.delay\\\" required> </div> <div class=\\\"-field\\\"> <label>Alert title</label> <input type=\\\"text\\\" ng-model=\\\"$ctrl.anomalyTrigger.alert.title\\\" required> </div> <div class=\\\"-field\\\"> <label>Alert message</label> <textarea ng-model=\\\"$ctrl.anomalyTrigger.alert.message\\\" required></textarea> </div> <div class=\\\"-field\\\"> <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.anomalyTrigger.flagOrder\\\"> <label>Flag order</label> </div> </div> <div class=\\\"-section order-matching\\\"> <div class=\\\"-field\\\"> <input type=\\\"radio\\\" ng-model=\\\"$ctrl.anomalyTrigger.matchOrders\\\" name=\\\"matchOrders\\\" value=\\\"all\\\" required> <label>All orders</label> </div> <div class=\\\"-field\\\"> <input type=\\\"radio\\\" ng-model=\\\"$ctrl.anomalyTrigger.matchOrders\\\" name=\\\"matchOrders\\\" value=\\\"withAllergies\\\" required> <label>Only orders with allergy notes</label> </div> </div> <div class=\\\"-group buttons\\\"> <button type=\\\"button\\\" ng-if=\\\"$ctrl.showDelete\\\" class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <button class=\\\"-button save\\\">{{$ctrl.addButton ? 'Add' : 'Save'}}</button> </div> </form> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AnomalyTriggers } from '../../../api/anomalyTriggers';\nimport { AdminComponent } from '../../../AdminComponent';\nimport add from '../add/controller';\nimport edit from '../edit/controller';\n\n_ = lodash;\n\nclass AnomalyTriggersCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['anomalyTriggers'],\n      helpers: {\n        anomalyTriggers() {\n          return AnomalyTriggers.find();\n        }\n      }\n    });\n\t}\n}\n\nexport default angular.module('anomaly-triggers', [\n  angularMeteor,\n  add.name,\n  edit.name,\n])\n  .component('anomalytriggers', {\n    templateUrl: template,\n    controller: AnomalyTriggersCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/anomaly-triggers/list/template.html\";\n      var template = \"<ul class=\\\"-items\\\"> <li ng-repeat=\\\"anomalyTrigger in $ctrl.anomalyTriggers\\\"> <editanomalytrigger anomaly-trigger-id=\\\"anomalyTrigger._id._str\\\"></editanomalytrigger> </li> <li> <addanomalytrigger></addanomalytrigger> </li> </ul>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","export function resolve(anomalyTrigger) {\n\treturn {\n\t\tproductType: anomalyTrigger.productType,\n\t\tmeal: anomalyTrigger.productType == 'meal' ? (anomalyTrigger.meal == 'all' ? null : anomalyTrigger.meal) : null,\n\t\tportion: anomalyTrigger.productType == 'meal' ? (anomalyTrigger.portion._str == 'all' ? null : new Mongo.ObjectID(anomalyTrigger.portion._str)) : null,\n\t\tmealPlan: anomalyTrigger.productType == 'meal' ? (anomalyTrigger.mealPlan._str == 'all' ? null : new Mongo.ObjectID(anomalyTrigger.mealPlan._str)) : null,\n\t\taddOn: anomalyTrigger.productType == 'addOn' ? (anomalyTrigger.addOn._str == 'all' ? null : new Mongo.ObjectID(anomalyTrigger.addOn._str)) : null,\n\t\tquantity: parseInt(anomalyTrigger.quantity),\n\t\tdelay: parseInt(anomalyTrigger.delay),\n\t\talert: {\n\t\t\ttitle: anomalyTrigger.alert.title,\n\t\t\tmessage: anomalyTrigger.alert.message\n\t\t},\n\t\tflagOrder: anomalyTrigger.flagOrder,\n\t\tmatchOrders: anomalyTrigger.matchOrders\n\t};\n}","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { BundleTypes } from '../../../api/bundleTypes';\nimport { resolve } from '../helpers';\n_ = lodash;\n\nclass AddBundleTypeCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.$timeout = $timeout;\n\t}\n\tsave(bundleType) {\n    var bundleTypeId = BundleTypes.insert(resolve(bundleType));\n    FlowRouter.go('editBundleType', { bundleTypeId: bundleTypeId._str });\n\t}\n}\n\nexport default angular.module('add-bundle-type', [\n  angularMeteor,\n  form.name\n])\n  .component('addbundletype', {\n    templateUrl: template,\n    controller: AddBundleTypeCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/bundle-types/add/template.html\";\n      var template = \"<bundletypeform bundle-type=\\\"{}\\\" on-save=\\\"$ctrl.save(bundleType)\\\"></bundletypeform>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { BundleTypes } from '../../../api/bundleTypes';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\n\nclass EditBundleTypeCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('bundleTypes');\n    this.helpers({\n    \tbundleType() {\n    \t\treturn _.cloneDeep(BundleTypes.findOne({_id:new Mongo.ObjectID(this.bundleTypeId)}));\n    \t}\n    });\n    this.$timeout = $timeout;\n\t}\n\tsave(bundleType) {\n\t\tBundleTypes.update({_id:new Mongo.ObjectID(this.bundleTypeId)}, {$set:resolve(bundleType)});\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n\t}\n}\n\nexport default angular.module('edit-bundle-type', [\n  angularMeteor,\n  form.name\n])\n  .component('editbundletype', {\n    templateUrl: template,\n    controller: EditBundleTypeCtrl,\n    bindings: {\n    \tbundleTypeId: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/bundle-types/edit/template.html\";\n      var template = \"<bundletypeform bundle-type=\\\"$ctrl.bundleType\\\" on-save=\\\"$ctrl.save(bundleType)\\\"></bundletypeform> <p class=\\\"saved\\\" ng-if=\\\"$ctrl.saved\\\">Saved.</p> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nclass BundleTypeFormCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n    this.uses('mealPlans', 'portions');\n\t}\n\tsave() {\n\t\tthis.onSave({bundleType:this.bundleType});\n\t}\n}\n\nexport default angular.module('bundle-type-form', [\n  angularMeteor\n])\n  .component('bundletypeform', {\n    templateUrl: template,\n    controller: BundleTypeFormCtrl,\n    bindings: {\n    \tbundleType: '<',\n      onSave: '&',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/bundle-types/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save(); false\\\"> <div class=\\\"-field icon\\\"> <label>Icon</label> <img src=\\\"{{$ctrl.bundleType.icon | image}}\\\"> <input class=\\\"-input\\\" type=\\\"file\\\" upload=\\\"$ctrl.bundleType.icon = name\\\" upload-type=\\\"svg\\\"> </div> <div class=\\\"-field\\\"> <label>Name</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.bundleType.name\\\" required> </div> <div class=\\\"-field\\\"> <label>Description</label> <textarea class=\\\"-input\\\" ng-model=\\\"$ctrl.bundleType.description\\\" required></textarea> </div> <div class=\\\"-field\\\"> <label>Meal Plan</label> <select class=\\\"-input\\\" ng-model=\\\"$ctrl.bundleType.mealPlan._str\\\" required> <option></option> <option ng-repeat=\\\"mealPlan in $ctrl.mealPlans\\\" value=\\\"{{mealPlan._id._str}}\\\">{{mealPlan.name}}</option> </select> </div> <div class=\\\"-field\\\"> <label>Portion</label> <select class=\\\"-input\\\" ng-model=\\\"$ctrl.bundleType.portion._str\\\" required> <option></option> <option ng-repeat=\\\"portion in $ctrl.portions\\\" value=\\\"{{portion._id._str}}\\\">{{portion.name}}</option> </select> </div> <div class=\\\"-field\\\"> <label>SKU</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.bundleType.sku\\\" required> </div> <div class=\\\"-section grade\\\"> <h2>Grade</h2> <div class=\\\"-field\\\"> <label>Basic</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.bundleType.basicMeals\\\" required> </div> <div class=\\\"-field\\\"> <label>Premium</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.bundleType.premiumMeals\\\" required> </div> </div> <div class=\\\"-section pricing\\\"> <h2>Pricing</h2> <div class=\\\"-field\\\"> <label>Price</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.bundleType.price\\\" required> </div> <div class=\\\"-field\\\"> <label>Delivery Fee</label> <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.bundleType.deliveryFee\\\"> </div> </div> <button class=\\\"-button save\\\">Save</button> </form> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\nimport { BundleTypes } from '../../../api/bundleTypes';\nimport { MealPlans } from '../../../api/mealPlans';\nimport { Portions } from '../../../api/portions';\n_ = lodash;\n\nclass BundleTypesCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('bundleTypes', 'mealPlans', 'portions');\n    this.helpers({\n      bundleTypes() {\n        return BundleTypes.find();\n      }\n    });\n\t}\n  get collection() { return BundleTypes; }\n  get documents() { return this.bundleTypes; }\n  \n  mealPlan(id) {\n    return MealPlans.findOne({_id:id});\n  }\n  portion(id) {\n    return Portions.findOne({_id:id});\n  }\n}\n\nexport default angular.module('bundle-types', [\n  angularMeteor\n])\n  .component('bundletypes', {\n    templateUrl: template,\n    controller: BundleTypesCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/bundle-types/list/template.html\";\n      var template = \"<div class=\\\"--top\\\"> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <a class=\\\"-button add\\\" href=\\\"/products/bundle-types/add\\\">Add</a> </div> <table class=\\\"-entry-list\\\"> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th>Icon</th> <th>Name</th> <th>SKU</th> <th>Grade Ratio</th> <th>Meal Plan</th> <th>Portion</th> <!-- <th>Meal Price</th> --> <th>Price</th> <th>Delivery Fee</th> <th></th> </tr> <tr ng-repeat=\\\"bundleType in $ctrl.bundleTypes\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[bundleType._id._str]\\\" type=\\\"checkbox\\\"></td> <td><img src=\\\"{{bundleType.icon | image}}\\\"></td> <td>{{bundleType.name}}</td> <td>{{bundleType.sku}}</td> <td> <div><label>Basic:</label> <span class=\\\"value\\\">{{bundleType.basicMeals}}</span></div> <div><label>Premium:</label> <span class=\\\"value\\\">{{bundleType.premiumMeals}}</span></div> </td> <td>{{$ctrl.mealPlan(bundleType.mealPlan).name}}</td> <td>{{$ctrl.portion(bundleType.portion).name}}</td> <td>{{bundleType.price | currency}}</td> <td>{{bundleType.deliveryFee ? 'On' : 'Off'}}</td> <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/products/bundle-types/{{bundleType._id._str}}/edit\\\">Edit</a></td> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","export function resolve(bundleType) {\n\treturn {\n\t\ticon: bundleType.icon,\n\t\tname: bundleType.name,\n\t\tdescription: bundleType.description,\n\t\tmealPlan: bundleType.mealPlan,\n\t\tportion: bundleType.portion,\n\t\tsku: bundleType.sku,\n\t\tbasicMeals: parseInt(bundleType.basicMeals),\n\t\tpremiumMeals: parseInt(bundleType.premiumMeals),\n\t\tprice: parseFloat(bundleType.price),\n\t\tdeliveryFee: bundleType.deliveryFee\n\t};\n}\n","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\n[ Ingredients ] = AdminComponent.collections('Ingredients');\n\nclass AddIngredientCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.$timeout = $timeout;\n\t}\n\tsave(ingredient) {\n    var ingredientId = Ingredients.insert(resolve(ingredient));\n    FlowRouter.go('editIngredient', { ingredientId: ingredientId._str });\n\t}\n}\n\nexport default angular.module('add-ingredient', [\n  angularMeteor,\n  form.name\n])\n  .component('addingredient', {\n    templateUrl: template,\n    controller: AddIngredientCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/ingredients/add/template.html\";\n      var template = \"<ingredientform ingredient=\\\"{}\\\" on-save=\\\"$ctrl.save(ingredient)\\\"></ingredientform> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n[ Ingredients ] = AdminComponent.collections('Ingredients');\n\nclass EditIngredientCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['ingredients'],\n      helpers: {\n        ingredient() {\n          return _.cloneDeep(Ingredients.findOne({_id:new Mongo.ObjectID(this.ingredientid)}));\n        }\n      }\n    });\n    this.$timeout = $timeout;\n\t}\n\tsave(ingredient) {\n\t\tIngredients.update({_id:new Mongo.ObjectID(this.ingredientid)}, {$set:resolve(ingredient)});\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n\t}\n}\n\nexport default angular.module('edit-ingredient', [\n  angularMeteor,\n  form.name\n])\n  .component('editingredient', {\n    templateUrl: template,\n    controller: EditIngredientCtrl,\n    bindings: {\n    \tingredientid: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/ingredients/edit/template.html\";\n      var template = \"<ingredientform ingredient=\\\"$ctrl.ingredient\\\" on-save=\\\"$ctrl.save(ingredient)\\\"></ingredientform> <p class=\\\"saved\\\" ng-if=\\\"$ctrl.saved\\\">Saved.</p> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nclass IngredientFormCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n\t}\n\tsave() {\n\t\tthis.onSave({ingredient:this.ingredient});\n\t}\n  icon(ingredient) {\n    if (ingredient) {\n      return Meteor.settings.public.imageServerUrl + '/image.php?image=' + ingredient.icon;      \n    }\n  }\n}\n\nexport default angular.module('ingredient-form', [\n  angularMeteor\n])\n  .component('ingredientform', {\n    templateUrl: template,\n    controller: IngredientFormCtrl,\n    bindings: {\n    \tingredient: '<',\n      onSave: '&',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/ingredients/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save(); false\\\"> <div class=\\\"-field icon\\\"> <label>Icon</label> <img src=\\\"{{$ctrl.icon($ctrl.ingredient)}}\\\"> <input upload=\\\"$ctrl.ingredient.icon = name\\\" upload-type=\\\"svg\\\" type=\\\"file\\\"> </div> <div class=\\\"-field\\\"> <label>Name</label> <input type=\\\"text\\\" ng-model=\\\"$ctrl.ingredient.name\\\" required> </div> <div class=\\\"-field\\\"> <label>Type</label> <select ng-model=\\\"$ctrl.ingredient.type\\\"> <option value=\\\"main\\\">Main</option> <option value=\\\"allergen\\\">Allergen</option> </select> </div> <div class=\\\"-field\\\" ng-if=\\\"$ctrl.ingredient.type == 'allergen'\\\"> <label>Action</label> <select ng-model=\\\"$ctrl.ingredient.action\\\"> <option value=\\\"remove\\\">Remove</option> <option value=\\\"substitute\\\">Substitute</option> </select> </div> <div class=\\\"-field\\\" ng-if=\\\"$ctrl.ingredient.type == 'allergen'\\\"> <label>Surcharge</label> <input ng-model=\\\"$ctrl.ingredient.surcharge\\\" type=\\\"text\\\"> </div> <button class=\\\"-button save\\\">Save</button> </form> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\n_ = lodash;\n\nclass IngredientsCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive, {\n      uses: ['ingredients']\n    });\n\t}\n\n  get collection() { return 'Ingredients'; }\n  get documents() { return this.ingredients; }\n\n  icon(ingredient) {\n    return Meteor.settings.public.imageServerUrl + '/image.php?image=' + ingredient.icon;\n  }\n}\n\nexport default angular.module('ingredients', [\n  angularMeteor\n])\n  .component('ingredients', {\n    templateUrl: template,\n    controller: IngredientsCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/ingredients/list/template.html\";\n      var template = \"<div class=\\\"--top\\\"> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <a class=\\\"-button add\\\" href=\\\"/products/ingredients/add\\\">Add</a> </div> <table class=\\\"-entry-list\\\"> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th>Icon</th> <th>Name</th> <th>Type</th> <th>Action</th> <th>Surcharge</th> <th></th> </tr> <tr ng-repeat=\\\"ingredient in $ctrl.ingredients\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[ingredient._id._str]\\\" type=\\\"checkbox\\\"></td> <td class=\\\"icon\\\"><img src=\\\"{{$ctrl.icon(ingredient)}}\\\"></td> <td>{{ingredient.name}}</td> <td>{{ingredient.type}}</td> <td>{{ingredient.action}}</td> <td>{{ingredient.surcharge ? (ingredient.surcharge | currency) : '-'}}</td> <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/products/ingredients/{{ingredient._id._str}}/edit\\\">Edit</a></td> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","export function resolve(ingredient) {\n\treturn {\n\t\ticon: ingredient.icon,\n\t\tname: ingredient.name,\n\t\ttype: ingredient.type,\n\t\taction: ingredient.type == 'allergen' ? ingredient.action : null,\n\t\tsurcharge: ingredient.type == 'allergen' ? parseFloat(ingredient.surcharge) : null,\n\t};\n}\n","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { MealPlans } from '../../../api/mealPlans';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\nclass AddMealPlanCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.$timeout = $timeout;\n\t}\n\tsave(mealPlan) {\n    var mealPlanId = MealPlans.insert(resolve(mealPlan));\n    FlowRouter.go('editMealPlan', { mealPlanId: mealPlanId._str });\n\t}\n}\n\nexport default angular.module('add-meal-plan', [\n  angularMeteor,\n  form.name\n])\n  .component('addmealplan', {\n    templateUrl: template,\n    controller: AddMealPlanCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/meal-plans/add/template.html\";\n      var template = \"<mealplanform meal-plan=\\\"{}\\\" on-save=\\\"$ctrl.save(mealPlan)\\\"></mealplanform>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { MealPlans } from '../../../api/mealPlans';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\n\nclass EditMealPlanCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('mealPlans');\n    this.helpers({\n    \tmealPlan() {\n    \t\treturn _.cloneDeep(MealPlans.findOne({_id:new Mongo.ObjectID(this.mealplanid)}));\n    \t}\n    });\n    this.$timeout = $timeout;\n\t}\n\tsave(mealPlan) {\n\t\tMealPlans.update({_id:new Mongo.ObjectID(this.mealplanid)}, {$set:resolve(mealPlan)});\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n\t}\n}\n\nexport default angular.module('edit-meal-plan', [\n  angularMeteor,\n  form.name\n])\n  .component('editmealplan', {\n    templateUrl: template,\n    controller: EditMealPlanCtrl,\n    bindings: {\n    \tmealplanid: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/meal-plans/edit/template.html\";\n      var template = \"<mealplanform meal-plan=\\\"$ctrl.mealPlan\\\" on-save=\\\"$ctrl.save(mealPlan)\\\"></mealplanform> <p class=\\\"saved\\\" ng-if=\\\"$ctrl.saved\\\">Saved.</p> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nclass MealPlanFormCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n    console.log(this.mealPlan);\n\t}\n\n\tsave() {\n\t\tthis.onSave({mealPlan:this.mealPlan});\n\t}\n}\n\nexport default angular.module('meal-plan-form', [\n  angularMeteor\n])\n  .component('mealplanform', {\n    templateUrl: template,\n    controller: MealPlanFormCtrl,\n    bindings: {\n    \tmealPlan: '<',\n      onSave: '&',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/meal-plans/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save(); false\\\"> <div class=\\\"-field icon\\\"> <img src=\\\"{{$ctrl.mealPlan.icon | image}}\\\"> <input type=\\\"file\\\" upload=\\\"$ctrl.mealPlan.icon = name\\\" upload-type=\\\"svg\\\"> </div> <div class=\\\"-field\\\"> <label>Name</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.mealPlan.name\\\" required> </div> <div class=\\\"-field\\\"> <label>Description</label> <textarea class=\\\"-input\\\" ng-model=\\\"$ctrl.mealPlan.description\\\" required></textarea> </div> <button class=\\\"-button save\\\">Save</button> </form> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\n_ = lodash;\n\nclass MealPlansCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive, {\n      uses: ['mealPlans']\n    });\n\t}\n  get collection() { return 'MealPlans'; }\n  get documents() { return this.mealPlans; }\n}\n\nexport default angular.module('meal-plans', [\n  angularMeteor\n])\n  .component('mealplans', {\n    templateUrl: template,\n    controller: MealPlansCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/meal-plans/list/template.html\";\n      var template = \"<div class=\\\"--top\\\"> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <a class=\\\"-button add\\\" href=\\\"/products/meal-plans/add\\\">Add</a> </div> <table class=\\\"-entry-list\\\"> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th>Icon</th> <th>Name</th> <th>Description</th> <th></th> </tr> <tr ng-repeat=\\\"mealPlan in $ctrl.mealPlans\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[mealPlan._id._str]\\\" type=\\\"checkbox\\\"></td> <td><img src=\\\"{{mealPlan.icon | image}}\\\"></td> <td>{{mealPlan.name}}</td> <td>{{mealPlan.description}}</td> <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/products/meal-plans/{{mealPlan._id._str}}/edit\\\">Edit</a></td> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","export function resolve(mealPlan) {\n\treturn {\n\t\tname: mealPlan.name,\n\t\ticon: mealPlan.icon,\n\t\tdescription: mealPlan.description\n\t};\n}\n","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\nimport form from '../form/controller';\nimport { resolve } from '../helpers';\n_ = lodash;\n\n[ Meals ] = AdminComponent.collections('Meals');\n\nclass AddMealCtrl extends AdminComponent  {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n    this.newMeal = {\n      allergens: [],\n      sides: []\n    };\n\t}\n  save(meal) {\n    var id = Meals.insert(resolve(meal));\n    FlowRouter.go(`/products/meals/${id}/edit`);\n  }\n}\n\nexport default angular.module('add-meal', [\n  angularMeteor,\n  form.name\n])\n  .component('addmeal', {\n    templateUrl: template,\n    controller: AddMealCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/meals/add/template.html\";\n      var template = \"<mealform on-save=\\\"$ctrl.save(meal)\\\" meal=\\\"$ctrl.newMeal\\\"></mealform> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\nimport form from '../form/controller';\nimport { resolve } from '../helpers';\n_ = lodash;\n\n[ Meals ] = AdminComponent.collections('Meals');\n\nclass EditMealCtrl extends AdminComponent  {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['meals'],\n      helpers: {\n        meal() {\n          return _.cloneDeep(Meals.findOne({_id:new Mongo.ObjectID(this.mealid)}));\n        }\n      }\n    });\n    this.$timeout = $timeout;\n\t}\n  save(meal) {\n    Meals.update({_id:new Mongo.ObjectID(this.mealid)}, {\n      $set:resolve(meal)\n    });\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n  }\n}\n\nexport default angular.module('edit-meal', [\n  angularMeteor,\n  form.name\n])\n  .component('editmeal', {\n    templateUrl: template,\n    controller: EditMealCtrl,\n    bindings: {\n      mealid: '<',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/meals/edit/template.html\";\n      var template = \"<mealform on-save=\\\"$ctrl.save(meal)\\\" meal=\\\"$ctrl.meal\\\"></mealform> <p class=\\\"saved\\\" ng-if=\\\"$ctrl.saved\\\">Saved.</p>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { Sides } from '../../../api/sides';\nimport { Ingredients } from '../../../api/ingredients';\n_ = lodash;\n\nfunction selection(options, list, predicate) {\n\tvar sel = {};\n\tfor (var option of options) {\n\t\t((option) => {\n\t\t\tvar p = predicate(option);\n  \t\tObject.defineProperty(sel, option._id._str, {\n  \t\t\tget: () => {\n  \t\t\t\treturn _.some(list, p);\n  \t\t\t},\n  \t\t\tset: (value) => {\n  \t\t\t\tif (value) {\n  \t\t\t\t\tlist.push(option._id);\n  \t\t\t\t}\n  \t\t\t\telse {\n  \t\t\t\t\t_.remove(list, p);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t})    \t\t\t\n\t\t})(option);\n\t}\n\treturn sel;\n}\n\nclass MealFormCtrl extends AdminComponent  {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['sides', 'ingredients'],\n      uses: ['mealPlans', 'portions']\n    });\n\n    this.allergenSelection = {};\n    this.autorun(() => {\n    \tvar allergens = Ingredients.find({type:'allergen'}).fetch();\n    \tif (this.meal) {\n\t\t    this.allergenSelection = selection(allergens, this.meal.allergens, (allergen) => {\n\t\t    \treturn (a) => {return a._str == allergen._id._str};\n\t\t    });\n    \t}\n    });\n\n    this.helpers({\n    \tsides() {\n    \t\treturn Sides.find();\n    \t},\n    \tmainIngredients() {\n    \t\treturn Ingredients.find({type:'main'});\n    \t},\n    \tallergens() {\n    \t\treturn Ingredients.find({type:'allergen'});\n    \t},\n    });\n\t}\n\n\tsave() {\n\t\tthis.onSave({\n\t\t\tmeal: this.meal\n\t\t});\n\t}\n}\n\nexport default angular.module('meal-form', [\n  angularMeteor,\n])\n  .component('mealform', {\n    templateUrl: template,\n    controller: MealFormCtrl,\n    bindings: {\n      onSave: '&',\n      meal: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/meals/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save(); false\\\"> <div class=\\\"-group image\\\"> <div class=\\\"-field\\\"> <label>Primary Image</label> <img src=\\\"{{$ctrl.meal.primaryImage}}\\\"> <input upload=\\\"$ctrl.meal.primaryImage = url\\\" type=\\\"file\\\"> </div> <div class=\\\"-field\\\"> <label>Secondary Image</label> <img src=\\\"{{$ctrl.meal.secondaryImage}}\\\"> <input upload=\\\"$ctrl.meal.secondaryImage = url\\\" type=\\\"file\\\"> </div> </div> <div class=\\\"-group details\\\"> <div class=\\\"-field name\\\"> <label>Name</label> <input class=\\\"-input\\\" type=\\\"text\\\" name=\\\"name\\\" ng-model=\\\"$ctrl.meal.name\\\" required> </div> <div class=\\\"-group meal-plan-portion\\\"> <div class=\\\"-field meal-plan\\\"> <label>Meal Plan</label> <select class=\\\"-input\\\" ng-model=\\\"$ctrl.meal.mealPlan._str\\\" required> <option></option> <option ng-repeat=\\\"mealPlan in $ctrl.mealPlans\\\" value=\\\"{{mealPlan._id._str}}\\\">{{mealPlan.name}}</option> </select> </div> <div class=\\\"-field portion\\\"> <label>Portion</label> <select class=\\\"-input\\\" ng-model=\\\"$ctrl.meal.portion._str\\\" required> <option></option> <option ng-repeat=\\\"portion in $ctrl.portions\\\" value=\\\"{{portion._id._str}}\\\">{{portion.name}}</option> </select> </div> </div> <div class=\\\"-field sides\\\"> <label>Sides</label> <div class=\\\"-inputs\\\"> <select class=\\\"-input\\\" ng-model=\\\"$ctrl.meal.sides[0]._str\\\"> <option></option> <option ng-repeat=\\\"side in $ctrl.sides\\\" value=\\\"{{side._id._str}}\\\">{{side.name}}</option> </select> <select class=\\\"-input\\\" ng-model=\\\"$ctrl.meal.sides[1]._str\\\"> <option></option> <option ng-repeat=\\\"side in $ctrl.sides\\\" value=\\\"{{side._id._str}}\\\">{{side.name}}</option> </select> </div> </div> <div class=\\\"-field grade\\\"> <label>Grade</label> <select class=\\\"-input\\\" ng-model=\\\"$ctrl.meal.grade\\\" required> <option></option> <option value=\\\"basic\\\">Basic</option> <option value=\\\"premium\\\">Premium</option> </select> <input class=\\\"-input price\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.meal.price\\\" ng-if=\\\"$ctrl.meal.grade == 'premium'\\\" placeholder=\\\"Price\\\" required> </div> <div class=\\\"-field sku\\\"> <label>SKU</label> <input type=\\\"text\\\" ng-model=\\\"$ctrl.meal.sku\\\"> </div> <div class=\\\"-field description\\\"> <label>Description</label> <textarea class=\\\"-input\\\" ng-model=\\\"$ctrl.meal.description\\\"></textarea> </div> </div> <div class=\\\"-section ingredients\\\"> <h2>Ingredients</h2> <div class=\\\"-field main\\\"> <label>Main</label> <ul> <li ng-repeat=\\\"ingredient in $ctrl.mainIngredients\\\"> <input type=\\\"radio\\\" value=\\\"{{ingredient._id._str}}\\\" name=\\\"mainIngredient\\\" ng-model=\\\"$ctrl.meal.mainIngredient._str\\\" required> <label>{{ingredient.name}}</label> </li> </ul> </div> <div class=\\\"-field allergens\\\"> <label>Allergens</label> <ul> <li ng-repeat=\\\"ingredient in $ctrl.allergens\\\"> <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.allergenSelection[ingredient._id._str]\\\"> <label>{{ingredient.name}}</label> </li> </ul> </div> </div> <div class=\\\"-section nutrients\\\"> <div class=\\\"-section macro\\\"> <h2>Macro Nutrients</h2> <div class=\\\"-field\\\"> <label>Calories</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.meal.nutritionFacts.calories\\\" required> kcal </div> <div class=\\\"-field\\\"> <label>Carbohydrates</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.meal.nutritionFacts.carbohydrates\\\" required> g </div> <div class=\\\"-field\\\"> <label>Fats</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.meal.nutritionFacts.fat\\\" required> g </div> <div class=\\\"-field\\\"> <label>Protein</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.meal.nutritionFacts.protein\\\" required> g </div> </div> <div class=\\\"-section micro\\\"> <h2>Micro Nutrients</h2> <div class=\\\"-field\\\"> <label>Fibre</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.meal.nutritionFacts.fiber\\\" required> g </div> <div class=\\\"-field\\\"> <label>Sodium</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.meal.nutritionFacts.sodium\\\" required> mg </div> <div class=\\\"-field\\\"> <label>Sugar</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.meal.nutritionFacts.sugar\\\" required> g </div> </div> </div> <button class=\\\"-button save\\\">Save</button> </form>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\nimport { AdminComponent } from '../../../AdminComponent';\n\n[ MealPlans, Portions, Ingredients ] = AdminComponent.collections('MealPlans', 'Portions', 'Ingredients');\n\n_ = lodash;\n\nclass MealsCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['meals', 'ingredients', 'mealPlans', 'portions'],\n      helpers: {\n        meals() {\n\n          var filter = this.getReactively('filter');\n          var query = {};\n          if (filter) {\n            var mealPlans = MealPlans.find({name:new RegExp(filter, 'i')}).fetch().map(mealPlan => mealPlan._id);\n            var portions = Portions.find({name:new RegExp(filter, 'i')}).fetch().map(portion => portion._id);\n            var ingredients = Ingredients.find({name:new RegExp(filter, 'i')}).fetch().map(ingredient => ingredient._id);\n            query.$or = [{name:new RegExp(filter, 'i')}, {sku:new RegExp(filter, 'i')}, {grade:new RegExp(filter, 'i')}, {mealPlan:{$in:mealPlans}}, {portion:{$in:portions}}, {mainIngredient:{$in:ingredients}}, {allergens:{$elemMatch:{$in:ingredients}}}];\n          }\n          return Meals.find(query);\n\n          // var filter = this.getReactively('filter');\n          // var query = {};\n          // if (filter) {\n          //   query['name'] = new RegExp(filter, 'i');\n          // }\n          // return Meals.find(query);\n        }\n      }\n    });\n\t}\n\n  get collection() { return Meals; }\n  get documents() { return this.meals; }\n}\n\nexport default angular.module('meals', [\n  angularMeteor\n])\n  .component('meals', {\n    templateUrl: template,\n    controller: MealsCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/meals/list/template.html\";\n      var template = \"<div class=\\\"--top\\\"> <input class=\\\"search\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.filter\\\"> <div class=\\\"-group buttons\\\"> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <a class=\\\"-button add\\\" href=\\\"/products/meals/add\\\">Add</a> </div> </div> <table class=\\\"-entry-list\\\"> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th>Image</th> <th>Name</th> <th>SKU</th> <th>Meal Plan</th> <th>Portion</th> <th>Grade</th> <th>Ingredients</th> <th>Macros</th> <th></th> </tr> <tr ng-repeat=\\\"meal in $ctrl.meals\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[meal._id._str]\\\" type=\\\"checkbox\\\"></td> <td class=\\\"image\\\"><img src=\\\"{{meal.primaryImage}}\\\"></td> <td class=\\\"name\\\">{{meal.name}}</td> <td class=\\\"sku\\\">{{meal.sku}}</td> <td class=\\\"meal-plan\\\">{{$ctrl.mealPlan(meal.mealPlan).name}}</td> <td class=\\\"portion\\\">{{$ctrl.portion(meal.portion).name}}</td> <td class=\\\"grade\\\">{{meal.grade | upperFirst}}</td> <td class=\\\"ingredients\\\"> <div><label>Main:</label> {{$ctrl.ingredient(meal.mainIngredient).name}}</div> <div ng-if=\\\"meal.allergens.length\\\"> <label>Allergens:</label> <ul> <li ng-repeat=\\\"allergen in meal.allergens\\\">{{$ctrl.ingredient(allergen).name}}</li> </ul> </div> </td> <td class=\\\"macros\\\"> <div><label>Calories:</label> <span class=\\\"value\\\">{{meal.nutritionFacts.calories}} kcal</span></div> <div><label>Carbs:</label> <span class=\\\"value\\\">{{meal.nutritionFacts.carbohydrates}} g</span></div> <div><label>Fats:</label> <span class=\\\"value\\\">{{meal.nutritionFacts.fat}} g</span></div> <div><label>Protein:</label> <span class=\\\"value\\\">{{meal.nutritionFacts.protein}} g</span></div> </td> <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/products/meals/{{meal._id._str}}/edit\\\">Edit</a></td> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","export function resolve(meal) {\n  return {\n    name: meal.name,\n    primaryImage: meal.primaryImage,\n    secondaryImage: meal.secondaryImage,\n    mealPlan: new Mongo.ObjectID(meal.mealPlan._str),\n    portion: new Mongo.ObjectID(meal.portion._str),\n    sides: [\n      new Mongo.ObjectID(meal.sides[0]._str),\n      new Mongo.ObjectID(meal.sides[1]._str),\n    ],\n    price: meal.grade == 'premium' ? parseFloat(meal.price) : null,\n    sku: meal.sku,\n    grade: meal.grade,\n    description: meal.description,\n    mainIngredient: new Mongo.ObjectID(meal.mainIngredient._str),\n    allergens: _.map(meal.allergens, (id) => new Mongo.ObjectID(id._str)),\n    nutritionFacts: {\n      calories: parseFloat(meal.nutritionFacts.calories),\n      carbohydrates: parseFloat(meal.nutritionFacts.carbohydrates),\n      fat: parseFloat(meal.nutritionFacts.fat),\n      protein: parseFloat(meal.nutritionFacts.protein),\n      fiber: parseFloat(meal.nutritionFacts.fiber),\n      sodium: parseFloat(meal.nutritionFacts.sodium),\n      sugar: parseFloat(meal.nutritionFacts.sugar),\n    }\n  };\n}\n","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { weeksForMonth, today, formatDate } from '../../../date';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { monthName } from '../../../helpers';\n_ = lodash;\n\n[ MealPlans, Portions, BundleTypes, Meals, Ingredients, TimeSlots ] = AdminComponent.collections('MealPlans', 'Portions', 'BundleTypes', 'Meals', 'Ingredients', 'TimeSlots');\n\n\nfunction amPm(time, appendSuffix=true) {\n  var date = new Date(Date.parse('Jan 1 ' + time));\n  var hours = date.getHours();\n  var suffix = hours >= 12 ? \"pm\":\"am\";\n  hours = ((hours + 11) % 12 + 1); \n\n  return hours + (appendSuffix ? '' + suffix : '');\n}\n\n\nclass AddOrderCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $http) {\n    super($scope, $meteor, $reactive, {\n      uses: ['mealPlans', 'portions', 'bundleTypes', 'meals', 'timeSlots'],\n      subscriptions: ['ingredients', 'users'],\n      helpers: {\n        allergens() {\n          return Ingredients.find({type:'allergen'});\n        }\n      }\n    });\n    this.$http = $http;\n\n    this.order = {\n      bundles: []\n    };\n\n    $scope.$watch('$ctrl.user.email', () => {\n      if (this.user) {\n        var user = Meteor.users.findOne({username:this.user.email});\n        this.orderUser = user;\n        if (this.orderUser) {\n          this.user.firstName = this.orderUser.profile.firstName;\n          this.user.surname = this.orderUser.profile.surname;\n          this.user.phoneNumber = this.orderUser.profile.phoneNumber;\n        }\n      }\n    }, true);\n\n    this.month = new Date();\n    this.today = today();\n    this.weeks = weeksForMonth(this.month);\n\n    $scope.$watch('$ctrl.order.bundles', () => {\n      this.updateCalendar();\n    }, true);\n\n    this.addBundle();\n\t}\n\n  monthName(month) {\n    return monthName(month);\n  }\n\n  prevMonth() {\n    this.month = new Date(this.month.getFullYear(), this.month.getMonth() - 1, 1, 0, 0, 0);\n    this.weeks = weeksForMonth(this.month);\n    this.updateCalendar();\n  }\n\n  nextMonth() {\n    this.month = new Date(this.month.getFullYear(), this.month.getMonth() + 1, 1, 0, 0, 0);\n    this.weeks = weeksForMonth(this.month);\n    this.updateCalendar();\n  }\n\n  updateCalendar() {\n    var order;\n    try {\n      order = this.serializedOrder();\n    }\n    catch (e) {\n      this.timeSlotsForDates = null;\n      // this.timeSlotsForSelectedDate = null;\n      // if (this.order.deliveryOptions) {\n      //   this.order.deliveryOptions.time = null;\n      //   this.order.deliveryOptions.date = null;\n      // }\n    }\n    if (order) {\n      this.$http({\n        method:'POST',\n        url:Meteor.settings.public.userDashboardUrl + 'api/delivery/calendar?month=' + this.month.getFullYear() + '-' + (this.month.getMonth() + 1),\n        data:{\n          order:order,\n        },\n        headers: {\n          'X-Auth-Token':localStorage.getItem('Meteor.loginToken'),\n          'X-User-Id':Meteor.userId()\n        }\n      }).then((response) => {\n        this.timeSlotsForDates = response.data;\n        // this.timeSlotsForSelectedDate = null;\n        // if (this.order.deliveryOptions) {\n        //   this.order.deliveryOptions.date = null;\n        //   this.order.deliveryOptions.time = null;\n        // }\n      });\n    }\n  }\n  dateAvailable(date) {\n    return this.timeSlotsForDates && this.timeSlotsForDates[formatDate(date)] && this.timeSlotsForDates[formatDate(date)].length;\n  }\n  selectDate(date) {\n    if (this.dateAvailable(date)) {\n      if (!this.order.deliveryOptions) {\n        this.order.deliveryOptions = {};\n      }\n      this.order.deliveryOptions.date = formatDate(date);\n      this.timeSlotsForSelectedDate = _.map(this.timeSlotsForDates[this.order.deliveryOptions.date], (timeSlotId) => { return TimeSlots.findOne({_id:new Mongo.ObjectID(timeSlotId)}); });      \n      this.showCalendar = false;\n    }\n  }\n  dateSelected(date) {\n    return this.order.deliveryOptions && formatDate(date) == this.order.deliveryOptions.date;\n  }\n  timeSlotTitle(timeSlot) {\n    return timeSlot.start + '-' + timeSlot.end;\n  }\n  bundleValid(bundle) {\n    var totalMeals = 0;\n    if (!(bundle.type && bundle.portion && bundle.mealPlan)) return false;\n    for (var mealSelection of bundle.mealSelections) {\n      if (!mealSelection.meal) return false;\n      totalMeals += parseInt(mealSelection.quantity);\n    }\n    if (_.isNaN(totalMeals) || totalMeals != bundle.type.basicMeals) {\n      return false;\n    }\n    return true;\n  }\n  serializedOrder(userId) {\n    var order = {\n      userId:userId,\n      bundles: _.map(this.order.bundles, (bundle) => {\n        return {\n          mealPlan:bundle.mealPlan._id._str,\n          portion:bundle.portion._id._str,\n          type:bundle.type._id._str,\n          allergies:_.transform(bundle.allergies, (allergies, enabled, id) => {\n            if (enabled) {\n              allergies.push(id);\n            }\n          }, []),\n          mealSelections:_.transform(bundle.mealSelections, (mealSelections, mealSelection) => {\n            mealSelections.push({\n              mealId:mealSelection.meal._id._str,\n              quantity:mealSelection.quantity\n            });\n          })\n        };\n      }),\n    };\n\n    if (this.order.deliveryOptions) {\n      order.deliveryOptions = {\n        date:this.order.deliveryOptions.date,\n        time:this.order.deliveryOptions.time ? this.order.deliveryOptions.time._id._str : null,\n        address:this.order.deliveryOptions.address,\n        postalCode:this.order.deliveryOptions.postalCode,\n        note:this.order.deliveryOptions.note,\n        disposableCutlery:this.order.deliveryOptions.disposableCutlery,\n        selfCollection:this.order.deliveryOptions.fulfillmentMethod == 'selfCollection',\n      };\n    }\n\n    return order;\n  }\n  add() {\n    for (var bundle of this.order.bundles) {\n      if (!this.bundleValid(bundle)) {\n        return;\n      }\n    }\n\n    var addOrder = (userId) => {\n      var order = this.serializedOrder(userId);\n      this.$http({\n        method:'POST',\n        url:Meteor.settings.public.userDashboardUrl + 'api/orders',\n        data:order,\n        headers: {\n          'X-Auth-Token':localStorage.getItem('Meteor.loginToken'),\n          'X-User-Id':Meteor.userId()\n        }\n      }).then(function(response) {\n        FlowRouter.go(`/orders/${response.data.orderId}`);\n      });\n    };\n\n    var user = Meteor.users.findOne({username:this.user.email});\n    if (!user) {\n      Meteor.call('createUser', {\n        username:this.user.email,\n        email:this.user.email,\n        password:'password',\n        profile: {\n          firstName:this.user.firstName,\n          surname:this.user.surname,\n          phoneNumber:this.user.phoneNumber,\n          deliveryAddresses:[{\n            address:this.order.deliveryOptions.address,\n            postalCode:this.order.deliveryOptions.postalCode\n          }],\n          selectedDeliveryAddress:0\n        }\n      }, (error, response) => {\n        addOrder(response.orderId);\n      });\n    }\n    else {\n      addOrder(user._id)\n    }\n  }\n  addBundle() {\n    this.order.bundles.push({mealSelections:[], allergies:{}});\n  }\n  removeBundle(index) {\n    this.order.bundles.splice(index, 1);\n  }\n  addMeal(bundle) {\n    bundle.mealSelections.push({});\n  }\n  removeMeal(bundle, index) {\n    bundle.mealSelections.splice(index, 1);\n  }\n}\n\nexport default angular.module('add-order', [\n  angularMeteor\n])\n  .filter('bundleTypes', function() {\n    return function(bundleTypes, bundle) {\n      if (bundle.portion && bundle.mealPlan) {\n        return _.filter(bundleTypes, function(bundleType) {\n          return bundleType.portion._str == bundle.portion._id._str && bundleType.mealPlan._str == bundle.mealPlan._id._str;\n        });        \n      }\n      else {\n        return [];\n      }\n    }\n  })\n  .filter('meals', function() {\n    return function(meals, bundle) {\n      if (bundle.portion && bundle.mealPlan) {\n        return _.filter(meals, function(meal) {\n          return meal.portion._str == bundle.portion._id._str && meal.mealPlan._str == bundle.mealPlan._id._str;\n        });        \n      }\n      else {\n        return [];\n      }\n    }\n  })\n  .component('addorder', {\n    templateUrl: template,\n    controller: AddOrderCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/orders/add/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.add()\\\"> <div class=\\\"-section personal\\\"> <h3 class=\\\"-header\\\">Personal</h3> <div class=\\\"-fields\\\"> <div class=\\\"-field email\\\"> <label>Email</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.user.email\\\" required> </div> <div class=\\\"-field first-name\\\"> <label>First name</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-disabled=\\\"$ctrl.orderUser\\\" ng-model=\\\"$ctrl.user.firstName\\\" required> </div> <div class=\\\"-field surname\\\"> <label>Surname</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-disabled=\\\"$ctrl.orderUser\\\" ng-model=\\\"$ctrl.user.surname\\\" required> </div> <div class=\\\"-field phone\\\"> <label>Phone</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-disabled=\\\"$ctrl.orderUser\\\" ng-model=\\\"$ctrl.user.phoneNumber\\\" required> </div> </div> </div> <div class=\\\"-section bundles\\\"> <h3 class=\\\"-header\\\">Bundles</h3> <ul class=\\\"-items\\\"> <li ng-repeat=\\\"bundle in $ctrl.order.bundles\\\" ng-class=\\\"{invalid:!$ctrl.bundleValid(bundle)}\\\"> <div class=\\\"-field\\\"> <label>Meal Plan</label> <select class=\\\"-input\\\" ng-model=\\\"bundle.mealPlan\\\" ng-options=\\\"mealPlan.name for mealPlan in $ctrl.mealPlans\\\" required> <option></option> </select> </div> <div class=\\\"-field\\\"> <label>Portions</label> <select class=\\\"-input\\\" ng-model=\\\"bundle.portion\\\" ng-options=\\\"portion.name for portion in $ctrl.portions\\\" required> <option></option> </select> </div> <div class=\\\"-field\\\"> <label>Bundle</label> <select class=\\\"-input\\\" ng-model=\\\"bundle.type\\\" ng-options=\\\"bundleType.name for bundleType in $ctrl.bundleTypes | bundleTypes:bundle\\\" required> <option></option> </select> </div> <div class=\\\"-section allergies\\\"> <h4 class=\\\"-header\\\">Allergies</h4> <ul> <li ng-repeat=\\\"allergen in $ctrl.allergens\\\"> <input class=\\\"-input\\\" type=\\\"checkbox\\\" ng-model=\\\"bundle.allergies[allergen._id._str]\\\"> <label>{{allergen.name}}</label> </li> </ul> </div> <div class=\\\"-section meals\\\"> <h4 class=\\\"-header\\\">Meals</h4> <ul class=\\\"-items\\\"> <li ng-repeat=\\\"mealSelection in bundle.mealSelections\\\"> <input class=\\\"-input quantity\\\" type=\\\"text\\\" ng-model=\\\"mealSelection.quantity\\\" placeholder=\\\"Quantity\\\" required> <select class=\\\"-input\\\" ng-model=\\\"mealSelection.meal\\\" ng-options=\\\"meal.name for meal in $ctrl.meals | meals:bundle\\\" required> <option></option> </select> <button type=\\\"button\\\" class=\\\"-button delete\\\" ng-click=\\\"$ctrl.removeMeal(bundle, $index)\\\">Remove</button> </li> </ul> <button type=\\\"button\\\" class=\\\"-button add\\\" ng-click=\\\"$ctrl.addMeal(bundle)\\\">Add Meal</button> </div> </li> </ul> <button type=\\\"button\\\" class=\\\"-button add\\\" ng-click=\\\"$ctrl.addBundle()\\\" required>Add Bundle</button> </div> <div class=\\\"-section fulfillment\\\"> <h3 class=\\\"-header\\\">Fulfillment</h3> <div class=\\\"-container\\\"> <div class=\\\"-group method\\\"> <div class=\\\"delivery\\\"> <input class=\\\"-input\\\" type=\\\"radio\\\" name=\\\"fulfillmentMethod\\\" value=\\\"delivery\\\" ng-model=\\\"$ctrl.order.deliveryOptions.fulfillmentMethod\\\" required> <label>Delivery</label> </div> <div class=\\\"self-collection\\\"> <input class=\\\"-input\\\" type=\\\"radio\\\" name=\\\"fulfillmentMethod\\\" value=\\\"selfCollection\\\" ng-model=\\\"$ctrl.order.deliveryOptions.fulfillmentMethod\\\" required> <label>Self-collection</label> </div> </div> <div class=\\\"-field date\\\"> <label>Date</label> <input class=\\\"-input\\\" ng-focus=\\\"$ctrl.showCalendar = true\\\" ng-model=\\\"$ctrl.order.deliveryOptions.date\\\" type=\\\"text\\\" required> <div class=\\\"calendar\\\" ng-if=\\\"$ctrl.showCalendar\\\"> <div class=\\\"header\\\"> <button type=\\\"button\\\" ng-click=\\\"$ctrl.prevMonth()\\\">Prev</button> <button type=\\\"button\\\" ng-click=\\\"$ctrl.nextMonth()\\\">Next</button> <span class=\\\"month\\\">{{$ctrl.monthName($ctrl.month.getMonth())}} {{$ctrl.month.getFullYear()}}</span> </div> <div class=\\\"weekdays\\\"> <span class=\\\"weekday\\\">S</span> <span class=\\\"weekday\\\">M</span> <span class=\\\"weekday\\\">T</span> <span class=\\\"weekday\\\">W</span> <span class=\\\"weekday\\\">T</span> <span class=\\\"weekday\\\">F</span> <span class=\\\"weekday\\\">S</span> </div> <div class=\\\"week\\\" ng-repeat=\\\"week in $ctrl.weeks\\\"> <span class=\\\"date\\\" ng-click=\\\"$ctrl.selectDate(date)\\\" ng-repeat=\\\"date in week\\\" ng-class=\\\"{selected:$ctrl.dateSelected(date),'other-month':date.getMonth() != $ctrl.month.getMonth(), today: date.valueOf() == $ctrl.today.valueOf(), available:$ctrl.dateAvailable(date)}\\\"> <span class=\\\"number\\\">{{date.getDate()}}</span> </span> </div> </div> </div> <div class=\\\"-field time\\\"> <label>Time</label> <select class=\\\"-input\\\" ng-model=\\\"$ctrl.order.deliveryOptions.time\\\" ng-options=\\\"$ctrl.timeSlotTitle(timeSlot) for timeSlot in $ctrl.timeSlotsForSelectedDate\\\" required> <option></option> </select> </div> <div class=\\\"-field address\\\"> <label>Address</label> <textarea class=\\\"-input\\\" ng-model=\\\"$ctrl.order.deliveryOptions.address\\\" required></textarea> </div> <div class=\\\"-field postal-code\\\"> <label>Postal Code</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.order.deliveryOptions.postalCode\\\" required> </div> <div class=\\\"-field disposable-cutlery\\\"> <input class=\\\"-input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.order.deliveryOptions.disposableCutlery\\\"> <label>Disposable cutlery</label> </div> <div class=\\\"-field delivery-note\\\"> <label>Delivery note</label> <textarea class=\\\"-input\\\" ng-model=\\\"$ctrl.order.deliveryOptions.note\\\"></textarea> </div> </div> </div> <button class=\\\"-button save\\\">Save</button> </form>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { formatDate, timeDisplay } from '../../../helpers';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\n_ = lodash;\n\n[ Orders, MealPlans, Portions, Meals, AddOns ] = AdminComponent.collections('Orders', 'MealPlans', 'Portions', 'Meals', 'AddOns');\n\nconst DAY_LENGTH = 86400*1000;\nwindow.g_Orders = Orders;\n\nclass OrdersCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive, $http) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['meals', 'addOns'],\n      helpers: {\n        orders() {\n          var minDate;\n          var maxDate;\n          var now = new Date();\n          var filter = this.getReactively('filters.search');\n          var query = {state:{$in:['completed', 'failed']}};\n          var sortField = this.getReactively('sortField');\n          var sortDirection = this.getReactively('sortDirection');\n\n          if (this.userId) {\n            query.userId = this.userId;\n          }\n          \n          if (filter) {\n            var pattern = new RegExp(filter, 'i')\n            var users = Meteor.users.find({username:pattern}).map(user => user._id);\n            var meals = Meals.find({name:pattern}).map(meal => meal._id);\n            var addOns = AddOns.find({name:pattern}).map(addOn => addOn._id);\n            \n            query.$or = [\n              {'transaction.id':filter},\n              {number:parseInt(filter)},\n              {bundles:{$elemMatch:{'type.name': pattern}}},\n              {bundles:{$elemMatch:{'portion.name': pattern}}},\n              {bundles:{$elemMatch:{'mealPlan.name': pattern}}},\n              {'deliveryOptions.address': pattern},\n              {'deliveryOptions.postalCode': filter},\n              {'deliveryOptions.firstName': pattern},\n              {'deliveryOptions.surname': pattern},\n              {'deliveryOptions.contactNumber': pattern},\n              {'deliveryOptions.deliveryNote': pattern},\n              {userId: {$in:users}},\n              {bundles:{$elemMatch:{mealSelections:{$elemMatch:{'meal._id':{$in:meals}}}}}},\n              {addOnSelections:{$elemMatch:{$or:[{'addOn._id':{$in:addOns}}, {variant:pattern}]}}}\n            ];\n          }\n\n          switch (this.getReactively('filters.time')) {\n            case 'day':\n              if (this.getReactively('day')) {\n                minDate = this.day;\n                maxDate = new Date(minDate.getTime() + DAY_LENGTH);\n              }\n              break;\n            case 'week':\n              if (this.getReactively('week')) {\n                minDate = new Date(this.week.getFullYear(), this.week.getMonth(), this.week.getDate() - this.week.getDay());\n                maxDate = new Date(this.week.getFullYear(), this.week.getMonth(), this.week.getDate() + (7 - this.week.getDay()));\n              }\n              break;\n            case 'month':\n              if (this.getReactively('month')) {\n                minDate = new Date(this.month.getFullYear(), this.month.getMonth(), 1);\n                maxDate = new Date(this.month.getFullYear(), this.month.getMonth() + 1, 1);\n              }\n              break;\n          }\n\n          if (minDate && maxDate) {\n            query['deliveryOptions.date'] = {$gte:formatDate(minDate), $lt:formatDate(maxDate)};          \n          }\n\n          var sort = {};\n          if (sortField == 'fulfillment') {\n            sort['deliveryOptions.date'] = sortDirection;\n            sort['deliveryOptions.time'] = sortDirection;\n          }\n          else if (sortField == 'customer') {\n            sort['deliveryOptions.firstName'] = sortDirection;\n            sort['deliveryOptions.surname'] = sortDirection;\n          }\n          else {\n            sort[sortField] = sortDirection;\n          }\n          sort._id = -1;\n          return Orders.find(query, {sort:sort}).fetch();\n        }\n      }\n    });\n\n    this._subscribe('ordersByDate', () => {\n      var minDate, maxDate;\n      switch (this.getReactively('filters.time')) {\n        case 'day':\n          if (this.getReactively('day')) {\n            minDate = this.day;\n            maxDate = new Date(minDate.getTime() + DAY_LENGTH);\n          }\n          break;\n        case 'week':\n          if (this.getReactively('week')) {\n            minDate = new Date(this.week.getFullYear(), this.week.getMonth(), this.week.getDate() - this.week.getDay());\n            maxDate = new Date(this.week.getFullYear(), this.week.getMonth(), this.week.getDate() + (7 - this.week.getDay()));\n          }\n          break;\n        case 'month':\n          if (this.getReactively('month')) {\n            minDate = new Date(this.month.getFullYear(), this.month.getMonth(), 1);\n            maxDate = new Date(this.month.getFullYear(), this.month.getMonth() + 1, 1);\n          }\n          break;\n      } \n      console.log(minDate, maxDate);\n      return [minDate, maxDate]\n    });\n\n    // $meteor.autorun($scope, () => {\n    // })\n    this.$http = $http;\n    this.filters = {\n    \ttime: 'day',\n    \tflagged: false\n    };\n\n    $scope.$watch('$ctrl.filters', () => {\n      this.selected = {};\n    }, true);\n    \n    this.day = new Date();\n    this.month = new Date();\n    this.week = new Date();\n\n    this.sortField = 'number';\n    this.sortDirection = -1;\n\n\t}\n\n  toggleSort(field) {\n    if (this.sortField == field) {\n      if (this.sortDirection == -1) {\n        this.sortDirection = 1;\n      }\n      else {\n        this.sortDirection = -1;\n      }\n    }\n    else {\n      this.sortField = field;\n      this.sortDirection = -1;\n    }\n  }\n\n  get collection() { return Orders; }\n  get documents() { return this.orders; }\n\n  timeDisplay(time) {\n    return timeDisplay(time);\n  }\n  printInvoices() {\n    window.open(Meteor.settings.public.userDashboardUrl + 'api/admin/invoices?orders=' + this._selected);\n  }\n  export() {\n    window.open(Meteor.settings.public.exportUrl + 'delivery.php?orders=' + this._selected);\n  }\n}\n\nexport default angular.module('orders', [\n  angularMeteor\n])\n\t.filter('orders', function() {\n\t\treturn function(input, filters) {\n\t\t\treturn _.filter(input, function(obj) {\n\t\t\t\tif (filters.flagged) {\n\t\t\t\t\tif (obj.flagged) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t})\n  .component('orders', {\n    templateUrl: template,\n    controller: OrdersCtrl,\n    bindings: {\n      userId: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/orders/list/template.html\";\n      var template = \"<div class=\\\"filters\\\"> <div class=\\\"filter\\\"> <input ng-model=\\\"$ctrl.filters.search\\\" ng-model-options=\\\"{ debounce: 600 }\\\" type=\\\"text\\\" placeholder=\\\"Search\\\"> <button ng-click=\\\"$ctrl.filters.search = ''\\\">Clear</button> </div> <div class=\\\"filter\\\"> <ul class=\\\"values\\\"> <li ng-class=\\\"{active:$ctrl.filters.time == 'all'}\\\"><label ng-click=\\\"$ctrl.filters.time = 'all'\\\">All</label></li> <li ng-class=\\\"{active:$ctrl.filters.time == 'day'}\\\"><label ng-click=\\\"$ctrl.filters.time = 'day'\\\">Day:</label> <input type=\\\"date\\\" ng-model=\\\"$ctrl.day\\\"></li> <li ng-class=\\\"{active:$ctrl.filters.time == 'week'}\\\"><label ng-click=\\\"$ctrl.filters.time = 'week'\\\">Week:</label> <input type=\\\"week\\\" ng-model=\\\"$ctrl.week\\\"></li> <li ng-class=\\\"{active:$ctrl.filters.time == 'month'}\\\"><label ng-click=\\\"$ctrl.filters.time = 'month'\\\">Month:</label> <input type=\\\"month\\\" ng-model=\\\"$ctrl.month\\\"></li> </ul> </div> <div class=\\\"filter\\\"> <ul class=\\\"values\\\"> <li ng-class=\\\"{active:$ctrl.filters.flagged == false}\\\" ng-click=\\\"$ctrl.filters.flagged = false\\\"><label>All</label></li> <li ng-class=\\\"{active:$ctrl.filters.flagged == true}\\\" ng-click=\\\"$ctrl.filters.flagged = true\\\"><label>Flagged</label></li> </ul> </div> </div> <div class=\\\"-group export\\\"> <button class=\\\"-button\\\" ng-click=\\\"$ctrl.printInvoices()\\\">Print Invoices</button> <button class=\\\"-button\\\" ng-click=\\\"$ctrl.export()\\\">Export</button> <a ng-if=\\\"!$ctrl.userId\\\" class=\\\"-button add\\\" href=\\\"/orders/add\\\">Add</a> </div> <table> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th ng-click=\\\"$ctrl.toggleSort('status')\\\">Status</th> <th ng-click=\\\"$ctrl.toggleSort('number')\\\">Order</th> <th ng-if=\\\"!$ctrl.userId\\\" ng-click=\\\"$ctrl.toggleSort('customer')\\\">Customer</th> <th ng-click=\\\"$ctrl.toggleSort('fulfillment')\\\">Fulfillment</th> <th ng-click=\\\"$ctrl.toggleSort('bundles.0.mealPlan.name')\\\">Meal Plan</th> <th ng-click=\\\"$ctrl.toggleSort('bundles.0.portion.name')\\\">Portion</th> <th ng-click=\\\"$ctrl.toggleSort('bundles.0.type.name')\\\">Bundle Type</th> <th ng-click=\\\"$ctrl.toggleSort('addOnSelections.0.addOn.name')\\\">Add-ons</th> <th ng-click=\\\"$ctrl.toggleSort('total')\\\">Total</th> <!-- <th>State</th> --> <th></th> </tr> <tr ng-repeat=\\\"order in $ctrl.orders | orders:$ctrl.filters\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[order._id._str]\\\" type=\\\"checkbox\\\"></td> <td class=\\\"status {{order.state == 'failed' ? 'failed' : (order.flagged ? 'flagged' : 'not-flagged')}}\\\">{{order.state == 'failed' ? 'Failed' : (order.flagged ? 'Flagged' : 'Not Flagged')}}</td> <td>#{{order.number}}</td> <td ng-if=\\\"!$ctrl.userId\\\">{{order.deliveryOptions.firstName}} {{order.deliveryOptions.surname}}</td> <td class=\\\"fulfillment\\\"> <div class=\\\"attribute due\\\"> <label>Due:</label> <span class=\\\"value\\\"> <div>{{order.deliveryOptions.date}}</div> <div>{{$ctrl.timeDisplay(order.deliveryOptions.time)}}</div> </span> </div> <span ng-if=\\\"order.deliveryOptions.selfCollection\\\" class=\\\"self-collection\\\">Self-collection</span> <div ng-if=\\\"!order.deliveryOptions.selfCollection\\\" class=\\\"delivery-to attribute\\\"> <label>Delivery to:</label> <span class=\\\"value\\\"> {{order.deliveryOptions.address}}<br> {{order.deliveryOptions.postalCode}} </span> </div> </td> <td class=\\\"meal-plans\\\"> <ul> <li ng-repeat=\\\"bundle in order.bundles\\\">{{bundle.mealPlan.name}}</li> </ul> </td> <td class=\\\"portions\\\"> <ul> <li ng-repeat=\\\"bundle in order.bundles\\\">{{bundle.portion.name}}</li> </ul> </td> <td class=\\\"bundle-types\\\"> <ul> <li ng-repeat=\\\"bundle in order.bundles\\\">{{bundle.type.name}}</li> </ul> </td> <td class=\\\"add-ons\\\"> <ul> <li ng-repeat=\\\"addOnSelection in order.addOnSelections\\\"><div>{{addOnSelection.addOn.name}}</div> <div>{{addOnSelection.variant}}</div></li> </ul> </td> <td>{{order.total | currency}}</td> <!-- <td>{{order.createdAt | date:'d MMM yyyy h:mma'}}</td> --> <!-- <td>{{order.state}}</td> --> <td class=\\\"view\\\"><a href=\\\"/orders/{{order._id._str}}\\\">View</a></td> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { formatDate, timeDisplay } from '../../../helpers';\nimport { mongoProperty } from '../../../client/mongoProperty';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nclass OrderCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['users']\n    });\n    this._subscribe('orderById', () => {\n      return [new Mongo.ObjectID(this.order)];\n    })\n    this.autorun(() => {\n      if (!this.inited && this.subscriptions.users.ready()) {\n        this.order = Orders.findOne({_id:new Mongo.ObjectID(this.order)});\n        if (this.order) {\n          this.user = Meteor.users.findOne({_id:this.order.userId});        \n          mongoProperty(this, 'flagged', Orders, this.order, 'flagged', false);\n          this.inited = true;\n        }\n      }\n    });\n\t}\n  timeDisplay(time) {\n    return timeDisplay(time);\n  }\n  printInvoice() {\n    window.open(Meteor.settings.public.userDashboardUrl + 'api/admin/invoices?orders=' + this.order._id._str);\n  }\n}\n\nexport default angular.module('order', [\n  angularMeteor\n])\n  .component('order', {\n    templateUrl: template,\n    controller: OrderCtrl,\n    bindings: {\n      order: '<',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/orders/view/template.html\";\n      var template = \"<p ng-if=\\\"$ctrl.loading\\\">Loading...</p> <div ng-if=\\\"!$ctrl.loading\\\"> <button class=\\\"-button print-invoice\\\" ng-click=\\\"$ctrl.printInvoice()\\\">Print Invoice</button> <div class=\\\"order-number {{$ctrl.order.flagged ? 'flagged' : 'not-flagged'}}\\\"> Order # {{$ctrl.order.number}} </div> <div class=\\\"--top\\\"> <div class=\\\"personal\\\"> <h3>Personal</h3> <div class=\\\"attribute\\\"> <label>Name:</label> <span class=\\\"value\\\">{{$ctrl.user.profile.firstName}} {{$ctrl.user.profile.surname}}</span> </div> <div class=\\\"attribute\\\"> <label>Phone:</label> <span class=\\\"value\\\">{{$ctrl.user.profile.phoneNumber}}</span> </div> <div class=\\\"attribute\\\"> <label>Email:</label> <span class=\\\"value\\\">{{$ctrl.user.username}}</span> </div> </div> <div class=\\\"purchase\\\"> <h3>Purchase</h3> <div class=\\\"bundles\\\"> <ul> <li ng-repeat=\\\"bundle in $ctrl.order.bundles\\\"> <div class=\\\"attribute bundle-type\\\"> <label>Meal Bundle:</label> <span class=\\\"value\\\"> {{bundle.type.name}} </span> <span class=\\\"price\\\">{{bundle.type.price | currency}}</span> </div> <div class=\\\"attribute\\\"> <label>Portion:</label> <span class=\\\"value\\\">{{bundle.portion.name}}</span> </div> <div class=\\\"attribute\\\"> <label>Meal Plan:</label> <span class=\\\"value\\\">{{bundle.mealPlan.name}}</span> </div> <div ng-if=\\\"bundle.promotion\\\" class=\\\"attribute\\\"> <label>Promo Code:</label> <span class=\\\"value\\\">{{bundle.promotion.promoCode}}</span> </div> <div class=\\\"meals\\\"> <label>Meals:</label> <ul> <li ng-repeat=\\\"mealSelection in bundle.mealSelections\\\"> <span class=\\\"quantity\\\">{{mealSelection.quantity}}</span> <span class=\\\"name\\\">{{mealSelection.meal.name}}</span> </li> </ul> </div> <div class=\\\"allergies\\\" ng-if=\\\"bundle.allergies.length\\\"> <label>Allergy:</label> <ul> <li ng-repeat=\\\"allergy in bundle.allergies\\\"> <span class=\\\"quantity\\\">1</span> <span class=\\\"title\\\">{{allergy.name}} ({{allergy.action}})</span> <span class=\\\"surcharge\\\">{{allergy.surcharge | currency}}</span> </li> </ul> </div> </li> </ul> </div> <div class=\\\"attribute subtotal\\\"> <label>Subtotal:</label> <span class=\\\"value\\\">{{$ctrl.order.subtotal | currency}}</span> </div> </div> <div class=\\\"fulfillment\\\"> <h3>Fulfillment</h3> <div class=\\\"attribute\\\"> <label>Method:</label> <span class=\\\"value\\\">{{$ctrl.order.deliveryOptions.selfCollection ? 'Self Collection' : 'Delivery'}}</span> </div> <div class=\\\"attribute\\\"> <label>Date:</label> <span class=\\\"value\\\">{{$ctrl.order.deliveryOptions.date}}</span> </div> <div class=\\\"attribute\\\"> <label>Time:</label> <span class=\\\"value\\\">{{$ctrl.timeDisplay($ctrl.order.deliveryOptions.time)}}</span> </div> <div class=\\\"attribute\\\"> <label>Address:</label> <span class=\\\"value\\\">{{$ctrl.order.deliveryOptions.address}}<br>{{$ctrl.order.deliveryOptions.postalCode}}</span> </div> <div class=\\\"attribute\\\"> <label>Disposable cutlery:</label> <span class=\\\"value\\\">{{$ctrl.order.deliveryOptions.disposableCutlery ? 'Yes' : 'No'}}</span> </div> <div class=\\\"attribute\\\" ng-if=\\\"$ctrl.order.deliveryOptions.note\\\"> <label>Delivery note:</label> <span class=\\\"value\\\">{{$ctrl.order.deliveryOptions.note}}</span> </div> <div class=\\\"attribute delivery-fee\\\"> <label>Delivery fee:</label> <span class=\\\"value\\\">{{$ctrl.order.deliveryFee | currency}}</span> </div> </div> </div> <div class=\\\"payment\\\"> <h3>Payment</h3> <div class=\\\"attribute\\\"> <label>Method:</label> <span class=\\\"value\\\">Credit Card</span> </div> <div class=\\\"attribute\\\"> <label>Transaction ID:</label> <span class=\\\"value\\\">{{$ctrl.order.transaction.id}}</span> </div> <div class=\\\"attribute total\\\"> <label>Total:</label> <span class=\\\"value\\\">{{$ctrl.order.total | currency}}</span> </div> </div> <div class=\\\"status\\\"> <h3>Status</h3> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.flagged\\\"> <label>Flagged</label> </div> </div> </div>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { Partners } from '../../../api/partners';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\nclass AddPartnerCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.$timeout = $timeout;\n\t}\n\tsave(partners) {\n    var partnerId = Partners.insert(resolve(partners));\n    FlowRouter.go('editPartner', { partnerId: partnerId._str });\n\t}\n}\n\nexport default angular.module('add-partner', [\n  angularMeteor,\n  form.name\n])\n  .component('addpartner', {\n    templateUrl: template,\n    controller: AddPartnerCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/partners/add/template.html\";\n      var template = \"<partnerform partner=\\\"{}\\\" on-save=\\\"$ctrl.save(partner)\\\"></partnerform>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { Partners } from '../../../api/partners';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\nclass EditPartnerCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('partners');\n    this.helpers({\n    \tpartner() {\n    \t\treturn _.cloneDeep(Partners.findOne({_id:new Mongo.ObjectID(this.partnerId)}));\n    \t}\n    });\n    this.$timeout = $timeout;\n\t}\n\tsave(partner) {\n\t\tPartners.update({_id:new Mongo.ObjectID(this.partnerId)}, {$set:resolve(partner)});\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n\t}\n}\n\nexport default angular.module('edit-partner', [\n  angularMeteor,\n  form.name\n])\n  .component('editpartner', {\n    templateUrl: template,\n    controller: EditPartnerCtrl,\n    bindings: {\n    \tpartnerId: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/partners/edit/template.html\";\n      var template = \"<partnerform partner=\\\"$ctrl.partner\\\" on-save=\\\"$ctrl.save(partner)\\\"></partnerform> <p class=\\\"saved\\\" ng-if=\\\"$ctrl.saved\\\">Saved.</p> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nclass PartnerFormCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n\t}\n\n\tsave() {\n\t\tthis.onSave({partner:this.partner});\n\t}\n}\n\nexport default angular.module('partner-form', [\n  angularMeteor\n])\n  .component('partnerform', {\n    templateUrl: template,\n    controller: PartnerFormCtrl,\n    bindings: {\n    \tpartner: '<',\n      onSave: '&',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/partners/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save(); false\\\"> <div class=\\\"-field image\\\"> <label>Image</label> <img src=\\\"{{$ctrl.partner.image}}\\\"> <input type=\\\"file\\\" upload=\\\"$ctrl.partner.image = url\\\"> </div> <div class=\\\"-field\\\"> <label>Name</label> <input type=\\\"text\\\" ng-model=\\\"$ctrl.partner.name\\\" required> </div> <div class=\\\"-field\\\"> <label>Type</label> <select ng-model=\\\"$ctrl.partner.type\\\" required> <option value=\\\"corporate\\\">Corporate</option> <option value=\\\"gym\\\">Gym</option> </select> </div> <div class=\\\"-field\\\"> <label>Code</label> <input type=\\\"text\\\" ng-model=\\\"$ctrl.partner.code\\\" required> </div> <button class=\\\"-button save\\\">Save</button> </form> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\nimport { Partners } from '../../../api/partners';\n_ = lodash;\n\nclass PartnersCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('partners');\n    this.helpers({\n      partners() {\n        return Partners.find();\n      }\n    });\n\t}\n\n  get collection() { return Partners; }\n  get documents() { return this.partners; }\n}\n\nexport default angular.module('partners', [\n  angularMeteor\n])\n  .component('partners', {\n    templateUrl: template,\n    controller: PartnersCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/partners/list/template.html\";\n      var template = \"<div class=\\\"--top\\\"> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <a class=\\\"-button add\\\" href=\\\"/partners/add\\\">Add</a> </div> <table class=\\\"-entry-list\\\"> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th>Image</th> <th>Name</th> <th>Type</th> <th>Members</th> <th></th> </tr> <tr ng-repeat=\\\"partner in $ctrl.partners\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[partner._id._str]\\\" type=\\\"checkbox\\\"></td> <td><img src=\\\"{{partner.image}}\\\"></td> <td>{{partner.name}}</td> <td>{{partner.type}}</td> <td>{{partner.members}}</td> <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/partners/{{partner._id._str}}/edit\\\">Edit</a></td> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","export function resolve(partner) {\n\treturn {\n\t\tcode: partner.code,\n\t\timage: partner.image,\n\t\tname: partner.name,\n\t\ttype: partner.type,\n\t}\n}\n","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { Portions } from '../../../api/portions';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\nclass PortionCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.$timeout = $timeout;\n\t}\n\tsave(portion) {\n    var portionId = Portions.insert(resolve(portion));\n    FlowRouter.go('editPortion', { portionId: portionId._str });\n\t}\n}\n\nexport default angular.module('add-portion', [\n  angularMeteor,\n  form.name\n])\n  .component('addportion', {\n    templateUrl: template,\n    controller: PortionCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/portions/add/template.html\";\n      var template = \"<portionform portion=\\\"{}\\\" on-save=\\\"$ctrl.save(portion)\\\"></portionform>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { Portions } from '../../../api/portions';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\n_ = lodash;\n\n\nclass EditPortionCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('portions');\n    this.helpers({\n    \tportion() {\n    \t\treturn _.cloneDeep(Portions.findOne({_id:new Mongo.ObjectID(this.portionId)}));\n    \t}\n    });\n    this.$timeout = $timeout;\n\t}\n\tsave(portion) {\n\t\tPortions.update({_id:new Mongo.ObjectID(this.portionId)}, {$set:resolve(portion)});\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n\t}\n}\n\nexport default angular.module('edit-portion', [\n  angularMeteor,\n  form.name\n])\n  .component('editportion', {\n    templateUrl: template,\n    controller: EditPortionCtrl,\n    bindings: {\n    \tportionId: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/portions/edit/template.html\";\n      var template = \"<portionform portion=\\\"$ctrl.portion\\\" on-save=\\\"$ctrl.save(portion)\\\"></portionform> <p class=\\\"saved\\\" ng-if=\\\"$ctrl.saved\\\">Saved.</p> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nclass PortionFormCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n\t}\n\n\tsave() {\n\t\tthis.onSave({portion:this.portion});\n\t}\n}\n\nexport default angular.module('portion-form', [\n  angularMeteor\n])\n  .component('portionform', {\n    templateUrl: template,\n    controller: PortionFormCtrl,\n    bindings: {\n    \tportion: '<',\n      onSave: '&',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/portions/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save(); false\\\"> <div class=\\\"-field icon\\\"> <label>Icon</label> <img src=\\\"{{$ctrl.portion.icon | image}}\\\"> <input class=\\\"-input\\\" type=\\\"file\\\" upload=\\\"$ctrl.portion.icon = name\\\" upload-type=\\\"svg\\\"> </div> <div class=\\\"-field\\\"> <label>Name</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.portion.name\\\" required> </div> <div class=\\\"-field\\\"> <label>Description</label> <textarea class=\\\"-input\\\" ng-model=\\\"$ctrl.portion.description\\\" required></textarea> </div> <button class=\\\"-button save\\\">Save</button> </form> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\nimport { Portions } from '../../../api/portions';\n_ = lodash;\n\nclass PortionsCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('portions');\n    this.helpers({\n      portions() {\n        return Portions.find();\n      }\n    });\n\t}\n\n  get collection() { return Portions; }\n  get documents() { return this.portions; }\n}\n\nexport default angular.module('portions', [\n  angularMeteor\n])\n  .component('portions', {\n    templateUrl: template,\n    controller: PortionsCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/portions/list/template.html\";\n      var template = \"<div class=\\\"--top\\\"> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <a class=\\\"-button add\\\" href=\\\"/products/portions/add\\\">Add</a> </div> <table class=\\\"-entry-list\\\"> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th>Icon</th> <th>Name</th> <th>Description</th> <th></th> </tr> <tr ng-repeat=\\\"portion in $ctrl.portions\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[portion._id._str]\\\" type=\\\"checkbox\\\"></td> <td><img src=\\\"{{portion.icon | image}}\\\"></td> <td>{{portion.name}}</td> <td>{{portion.description}}</td> <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/products/portions/{{portion._id._str}}/edit\\\">Edit</a></td> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","export function resolve(portion) {\n\treturn {\n\t\tname: portion.name,\n\t\ticon: portion.icon,\n\t\tdescription: portion.description\n\t};\n}\n","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { Promotions } from '../../../api/promotions';\nimport form from '../form/controller';\nimport { formatDate } from '../../../helpers';\nimport { resolve } from '../helpers';\n_ = lodash;\n\nclass AddPromotionCtrl {\n  constructor($scope, $meteor, $reactive) {\n    $scope.viewModel(this);\n    $reactive(this).attach($scope);\n  }\n  add(promotionData) {\n    var promotionId = Promotions.insert(resolve(promotionData));\n    FlowRouter.go('editPromotion', { promotionId: promotionId._str });\n  }\n}\n\nexport default angular.module('add-promotion', [\n  angularMeteor,\n  form.name\n])\n  .component('addpromotion', {\n    templateUrl: template,\n    controller: AddPromotionCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/promotions/add/template.html\";\n      var template = \"<promotionform promotion=\\\"{}\\\" on-save=\\\"$ctrl.add(promotion)\\\"></promotionform> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { Promotions } from '../../../api/promotions';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { resolve } from '../helpers';\nimport { convertToDate } from '../../../date';\n_ = lodash;\n\n\nclass EditPromotionCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('promotions');\n    this.helpers({\n    \tpromotion() {\n    \t\tvar promotion = _.mapValues(_.cloneDeep(Promotions.findOne({_id:new Mongo.ObjectID(this.promotionId)})), (value, key) => {\n          switch (key) {\n            case 'start':\n            case 'end':\n            case 'fulfillmentStart':\n            case 'fulfillmentEnd':\n              return convertToDate(value);\n            case 'mealPlan':\n            case 'portion':\n            case 'bundleType':\n              if (!value) {\n                return {_str:'all'};\n              }\n            default:\n              return value;\n          }\n        });\n        if (promotion.usageLimit) {\n          promotion.limitedUsage = true;\n        }\n        if (promotion.premiumAllowance) {\n          promotion.hasPremiumAllowance = true;\n        }\n        if (promotion.premiumCap) {\n          promotion.hasPremiumCap = true;\n        }\n        return promotion;\n    \t}\n    });\n    this.$timeout = $timeout;\n\t}\n\tsave(promotion) {\n    console.log(promotion, this.promotionId, resolve(promotion));\n\t\tPromotions.update({_id:new Mongo.ObjectID(this.promotionId)}, {$set:resolve(promotion)});\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n\t}\n}\n\nexport default angular.module('edit-promotion', [\n  angularMeteor,\n  form.name\n])\n  .component('editpromotion', {\n    templateUrl: template,\n    controller: EditPromotionCtrl,\n    bindings: {\n    \tpromotionId: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/promotions/edit/template.html\";\n      var template = \"<promotionform promotion=\\\"$ctrl.promotion\\\" on-save=\\\"$ctrl.save(promotion)\\\"></promotionform> <p class=\\\"saved\\\" ng-if=\\\"$ctrl.saved\\\">Saved.</p> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\n\nclass PromotionFormCtrl extends AdminComponent {\n  constructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n    this.uses('portions', 'mealPlans', 'bundleTypes');\n  }\n  save() {\n    this.onSave({promotion:this.promotion});\n  }\n}\n\nexport default angular.module('promotion-form', [\n  angularMeteor,\n])\n  .filter('bundleTypes2', function() {\n    return function(bundleTypes, bundle) {\n      if (bundle && bundle.portion && bundle.mealPlan) {\n        return _.filter(bundleTypes, function(bundleType) {\n          return bundleType.portion._str == bundle.portion._str && bundleType.mealPlan._str == bundle.mealPlan._str;\n        });        \n      }\n      else {\n        return [];\n      }\n    }\n  })\n  .component('promotionform', {\n    templateUrl: template,\n    controller: PromotionFormCtrl,\n    bindings: {\n      onSave: '&',\n      promotion: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/promotions/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save()\\\"> <div class=\\\"-field\\\"> <label>Name</label> <input ng-model=\\\"$ctrl.promotion.name\\\" type=\\\"text\\\" required> </div> <div class=\\\"-field\\\"> <label>Meal Plan</label> <select ng-model=\\\"$ctrl.promotion.mealPlan._str\\\" required> <option></option> <option value=\\\"all\\\">All</option> <option ng-repeat=\\\"mealPlan in $ctrl.mealPlans\\\" value=\\\"{{mealPlan._id._str}}\\\">{{mealPlan.name}}</option> </select> </div> <div class=\\\"-field\\\"> <label>Portion</label> <select ng-model=\\\"$ctrl.promotion.portion._str\\\" required> <option></option> <option value=\\\"all\\\">All</option> <option ng-repeat=\\\"portion in $ctrl.portions\\\" value=\\\"{{portion._id._str}}\\\">{{portion.name}}</option> </select> </div> <div class=\\\"-field\\\"> <label>Meal Bundle</label> <select ng-model=\\\"$ctrl.promotion.bundleType._str\\\" required> <option></option> <option value=\\\"all\\\">All</option> <option ng-repeat=\\\"bundleType in $ctrl.bundleTypes | bundleTypes2:$ctrl.promotion\\\" value=\\\"{{bundleType._id._str}}\\\">{{bundleType.name}}</option> </select> </div> <div class=\\\"-field\\\"> <label>SKU</label> <input ng-model=\\\"$ctrl.promotion.sku\\\" type=\\\"text\\\" required> </div> <div class=\\\"-field\\\"> <label>Promo Code</label> <input ng-model=\\\"$ctrl.promotion.promoCode\\\" type=\\\"text\\\" required> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.promotion.limitedUsage\\\"> <label>Limit</label> <input class=\\\"-input\\\" type=\\\"text\\\" ng-if=\\\"$ctrl.promotion.limitedUsage\\\" ng-model=\\\"$ctrl.promotion.usageLimit\\\" required> </div> <div class=\\\"-section pricing\\\"> <h2>Pricing</h2> <div class=\\\"-field\\\"> <input name=\\\"pricingType\\\" ng-model=\\\"$ctrl.promotion.type\\\" value=\\\"override\\\" type=\\\"radio\\\" required> <label>Override</label> <input ng-model=\\\"$ctrl.promotion.overridePrice\\\" ng-if=\\\"$ctrl.promotion.type == 'override'\\\" type=\\\"text\\\" placeholder=\\\"eg. 49.99 (for $49.99)\\\" required> </div> <div class=\\\"-field\\\"> <input name=\\\"pricingType\\\" ng-model=\\\"$ctrl.promotion.type\\\" value=\\\"discount\\\" type=\\\"radio\\\" required> <label>Discount</label> <input ng-model=\\\"$ctrl.promotion.discount\\\" ng-if=\\\"$ctrl.promotion.type == 'discount'\\\" type=\\\"text\\\" placeholder=\\\"eg. 20 (for 20%)\\\" required> </div> <div class=\\\"-field\\\"> <input ng-model=\\\"$ctrl.promotion.deliveryFee\\\" type=\\\"checkbox\\\"> <label>Delivery fee</label> </div> </div> <div class=\\\"-section premium-meals\\\"> <h2>Premium Meals</h2> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.promotion.hasPremiumAllowance\\\"> <label>Allowance</label> <input class=\\\"-input\\\" ng-if=\\\"$ctrl.promotion.hasPremiumAllowance\\\" ng-model=\\\"$ctrl.promotion.premiumAllowance\\\" type=\\\"text\\\" required> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.promotion.hasPremiumCap\\\"> <label>Cap</label> <input class=\\\"-input\\\" ng-if=\\\"$ctrl.promotion.hasPremiumCap\\\" ng-model=\\\"$ctrl.promotion.premiumCap\\\" type=\\\"text\\\" required> </div> </div> <div class=\\\"-section promo-duration\\\"> <h2>Promo Duration</h2> <div class=\\\"-field\\\"> <label>Start</label> <input ng-model=\\\"$ctrl.promotion.start\\\" type=\\\"date\\\" required> </div> <div class=\\\"-field\\\"> <label>End</label> <input ng-model=\\\"$ctrl.promotion.end\\\" type=\\\"date\\\" required> </div> </div> <div class=\\\"-section fulfillment-duration\\\"> <h2>Fulfillment Duration</h2> <div class=\\\"-field\\\"> <label>Start</label> <input ng-model=\\\"$ctrl.promotion.fulfillmentStart\\\" type=\\\"date\\\"> </div> <div class=\\\"-field\\\"> <label>End</label> <input ng-model=\\\"$ctrl.promotion.fulfillmentEnd\\\" type=\\\"date\\\"> </div> </div> <button class=\\\"-button save\\\">Save</button> </form> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\nimport { Promotions } from '../../../api/promotions';\nimport { BundleTypes } from '../../../api/bundleTypes';\n_ = lodash;\n\n[ Orders ] = AdminComponent.collections('Orders');\n\nclass PromotionsCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['promotions', 'bundleTypes', 'mealPlans', 'portions', 'orders'],\n      helpers: {\n        promotions() {\n          var filter = this.getReactively('filter');\n          var query = {};\n          if (filter) {\n            var mealPlans = MealPlans.find({name:new RegExp(filter, 'i')}).fetch().map(mealPlan => mealPlan._id);\n            var portions = Portions.find({name:new RegExp(filter, 'i')}).fetch().map(portion => portion._id);\n            var bundleTypes = BundleTypes.find({name:new RegExp(filter, 'i')}).fetch().map(bundleType => bundleType._id);\n            if (new RegExp(filter, 'i').exec('All')) {\n              mealPlans.push(null);\n              portions.push(null);\n              bundleTypes.push(null);\n            }\n            query.$or = [{name:new RegExp(filter, 'i')}, {sku:new RegExp(filter, 'i')}, {promoCode:new RegExp(filter, 'i')}, {mealPlan:{$in:mealPlans}}, {portion:{$in:portions}}, {bundleType:{$in:bundleTypes}}];\n          }\n          return Promotions.find(query);\n        }\n      }\n    });\n    BundleTypes.find();\n\t}\n\n  get collection() { return Promotions; }\n  get documents() { return this.promotions; }\n\n  claimedCount(promotion) {\n    return Orders.find({bundles:{$elemMatch:{'promotion._id':promotion._id}}}).fetch().length;\n  }\n}\n\nexport default angular.module('promotions', [\n  angularMeteor\n])\n  .component('promotions', {\n    templateUrl: template,\n    controller: PromotionsCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/promotions/list/template.html\";\n      var template = \"<p ng-if=\\\"$ctrl.loading\\\">Loading...</p> <div ng-if=\\\"!$ctrl.loading\\\"> <div class=\\\"--top\\\"> <input class=\\\"search\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.filter\\\"> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <a class=\\\"-button add\\\" href=\\\"/promotions/add\\\">Add</a> </div> <table> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th>Name</th> <th>SKU</th> <th>Promo Code</th> <th>Bundle</th> <th>Meal Plan</th> <th>Portion</th> <th>Discount</th> <th>Price Override</th> <th>Promotion Duration</th> <th>Fulfillment Duration</th> <th>Limit</th> <th>Claimed</th> <th></th> </tr> <tr ng-repeat=\\\"promotion in $ctrl.promotions\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[promotion._id._str]\\\" type=\\\"checkbox\\\"></td> <td>{{promotion.name}}</td> <td>{{promotion.sku}}</td> <td>{{promotion.promoCode}}</td> <td>{{promotion.bundleType ? $ctrl.bundleType(promotion.bundleType).name : 'All'}}</td> <td>{{promotion.mealPlan ? $ctrl.mealPlan(promotion.mealPlan).name : 'All'}}</td> <td>{{promotion.portion ? $ctrl.portion(promotion.portion).name : 'All'}}</td> <td>{{promotion.discount}}</td> <td>{{promotion.overridePrice}}</td> <td>{{promotion.start}}&mdash;{{promotion.end}}</td> <td>{{promotion.fulfillmentStart}}&mdash;{{promotion.fulfillmentEnd}}</td> <td>{{promotion.usageLimit ? promotion.usageLimit : 'Unlimited'}}</td> <td>{{$ctrl.claimedCount(promotion)}}</td> <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/promotions/{{promotion._id._str}}/edit\\\">Edit</a></td> </tr> </table> </div>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import { formatDate } from '../../date';\n_ = lodash;\n\nexport function resolve(promotionData) {\n  var promotion = _.clone(promotionData);\n\n  if (!promotion.hasPremiumAllowance) {\n    promotion.premiumAllowance = null;\n  }\n\n  if (!promotion.hasPremiumCap) {\n    promotion.premiumCap = null;\n  }\n\n  if (!promotion.limitedUsage) {\n    promotion.usageLimit = null;\n  }\n  \n  if (promotion.mealPlan._str == 'all') {\n    promotion.mealPlan = null;\n  }\n  else {\n    promotion.mealPlan = new Mongo.ObjectID(promotion.mealPlan._str);\n  }\n\n  if (promotion.portion._str == 'all') {\n    promotion.portion = null;\n  }\n  else {\n    promotion.portion = new Mongo.ObjectID(promotion.portion._str);\n  }\n\n  if (promotion.bundleType._str == 'all') {\n    promotion.bundleType = null;\n  }\n  else {\n    promotion.bundleType = new Mongo.ObjectID(promotion.bundleType._str);\n  }\n\n  if (promotion.type != 'discount') {\n    delete promotion.discount;\n  }\n  if (promotion.type != 'override') {\n    delete promotion.overridePrice;\n  }\n  promotion.start = formatDate(promotion.start);\n  promotion.end = formatDate(promotion.end);\n  promotion.fulfillmentStart = formatDate(promotion.fulfillmentStart);\n  promotion.fulfillmentEnd = formatDate(promotion.fulfillmentEnd);\n\n  return promotion;\n}","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { Sides } from '../../../api/sides';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nfunction resolve(side) {\n\treturn {\n\t\tname: side.name\n\t};\n}\n\nclass AddSideCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.$timeout = $timeout;\n\t}\n\tsave(side) {\n    var sideId = Sides.insert(resolve(side));\n    FlowRouter.go('editSide', { sideId: sideId._str });\n\t}\n}\n\nexport default angular.module('add-side', [\n  angularMeteor,\n  form.name\n])\n  .component('addside', {\n    templateUrl: template,\n    controller: AddSideCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/sides/add/template.html\";\n      var template = \"<sideform side=\\\"{}\\\" on-save=\\\"$ctrl.save(side)\\\"></sideform>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport form from '../form/controller';\nimport { Sides } from '../../../api/sides';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nfunction resolve(side) {\n\treturn {\n\t\tname: side.name\n\t};\n}\n\nclass EditSiteCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive, $timeout) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('sides');\n    this.helpers({\n    \tside() {\n    \t\treturn _.cloneDeep(Sides.findOne({_id:new Mongo.ObjectID(this.sideid)}));\n    \t}\n    });\n    this.$timeout = $timeout;\n\t}\n\tsave(side) {\n\t\tSides.update({_id:new Mongo.ObjectID(this.sideid)}, {$set:resolve(side)});\n    this.saved = true;\n    this.$timeout(() => {\n      this.saved = false;\n    }, 5000);\n\t}\n}\n\nexport default angular.module('edit-side', [\n  angularMeteor,\n  form.name\n])\n  .component('editside', {\n    templateUrl: template,\n    controller: EditSiteCtrl,\n    bindings: {\n    \tsideid: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/sides/edit/template.html\";\n      var template = \"<sideform side=\\\"$ctrl.side\\\" on-save=\\\"$ctrl.save(side)\\\"></sideform> <p class=\\\"saved\\\" ng-if=\\\"$ctrl.saved\\\">Saved.</p> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\nclass SideFormCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n\t}\n\n\tsave() {\n\t\tthis.onSave({side:this.side});\n\t}\n}\n\nexport default angular.module('side-form', [\n  angularMeteor\n])\n  .component('sideform', {\n    templateUrl: template,\n    controller: SideFormCtrl,\n    bindings: {\n    \tside: '<',\n      onSave: '&',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/sides/form/template.html\";\n      var template = \"<form ng-submit=\\\"$ctrl.save(); false\\\"> <div class=\\\"-field\\\"> <label>Name</label> <input type=\\\"text\\\" ng-model=\\\"$ctrl.side.name\\\" required> </div> <button class=\\\"-button save\\\">Save</button> </form> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\nimport { Sides } from '../../../api/sides';\n_ = lodash;\n\nclass SidesCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive);\n    this.subscribe('sides');\n    this.helpers({\n      sides() {\n        return Sides.find();\n      }\n    });\n\t}\n\n  get collection() { return Sides; }\n  get documents() { return this.sides; }\n}\n\nexport default angular.module('sides', [\n  angularMeteor\n])\n  .component('sides', {\n    templateUrl: template,\n    controller: SidesCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/sides/list/template.html\";\n      var template = \"<div class=\\\"--top\\\"> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button> <a class=\\\"-button add\\\" href=\\\"/products/sides/add\\\">Add</a> </div> <table class=\\\"-entry-list\\\"> <tr> <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> <th>Name</th> <th></th> </tr> <tr ng-repeat=\\\"side in $ctrl.sides\\\"> <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[side._id._str]\\\" type=\\\"checkbox\\\"></td> <td>{{side.name}}</td> <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/products/sides/{{side._id._str}}/edit\\\">Edit</a></td> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { ListAdminComponent } from '../../../ListAdminComponent';\nimport { AdminComponent } from '../../../AdminComponent';\n\n// [ MealPlans, Portions, Ingredients ] = AdminComponent.collections('MealPlans', 'Portions', 'Ingredients');\n// Users = Meteor.users;\n\n_ = lodash;\n\nclass UsersCtrl extends ListAdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['users'],\n      helpers: {\n        users() {\n          // return Meteor.users.find().fetch();\n          var filter = this.getReactively('filter');\n          var query = {};\n          if (filter) {\n            // var mealPlans = MealPlans.find({name:new RegExp(filter, 'i')}).fetch().map(mealPlan => mealPlan._id);\n            // var portions = Portions.find({name:new RegExp(filter, 'i')}).fetch().map(portion => portion._id);\n            // var ingredients = Ingredients.find({name:new RegExp(filter, 'i')}).fetch().map(ingredient => ingredient._id);\n            query.$or = [ { 'profile.firstName': new RegExp(filter, 'i') }, { 'profile.phoneNumber': new RegExp(filter, 'i') }, { 'profile.surname': new RegExp(filter, 'i') }, { 'username': new RegExp(filter, 'i') }, { 'profile.deliveryAddresses': { $elemMatch: { $or: [ { address: new RegExp(filter, 'i') }, { postalCode: new RegExp(filter, 'i') } ] } } } ];\n          }\n          return Meteor.users.find(query).fetch();\n        }\n      }\n    });\n\t}\n\n  get collection() { return Meteor.users; }\n  get documents() { return this.users; }\n}\n\nexport default angular.module('users', [\n  angularMeteor\n])\n  .component('users', {\n    templateUrl: template,\n    controller: UsersCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/users/list/template.html\";\n      var template = \"<div class=\\\"--top\\\"> <input class=\\\"search\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.filter\\\"> <!-- \\t<div class=\\\"-group buttons\\\">\\n\\t\\t<button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n\\t\\t<a class=\\\"-button add\\\" href=\\\"/products/meals/add\\\">Add</a>\\n\\t</div>\\n --></div> <table class=\\\"-entry-list\\\"> <tr> <!-- <th><input ng-model=\\\"$ctrl.allSelected\\\" type=\\\"checkbox\\\"></th> --> <th>Name</th> <th>Email</th> <th>Addresses</th> <th>Phone Number</th> <th></th> </tr> <tr ng-repeat=\\\"user in $ctrl.users\\\"> <!-- <td class=\\\"select\\\"><input ng-model=\\\"$ctrl.selected[meal._id._str]\\\" type=\\\"checkbox\\\"></td> --> <td>{{user.profile.firstName}} {{user.profile.surname}}</td> <td>{{user.username}}</td> <td class=\\\"addresses\\\"> <ul> <li ng-repeat=\\\"address in user.profile.deliveryAddresses\\\"> <span ng-class=\\\"{selected:$index == user.profile.selectedDeliveryAddress}\\\"> {{address.address}} {{address.postalCode}} </span> </li> </ul> </td> <td>{{user.profile.phoneNumber}}</td> <td class=\\\"view\\\"><a href=\\\"/users/{{user._id}}\\\">View</a></td> <!-- <td class=\\\"edit\\\"><a class=\\\"edit\\\" href=\\\"/products/meals/{{meal._id._str}}/edit\\\">Edit</a></td> --> </tr> </table> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { formatDate, timeDisplay } from '../../../helpers';\nimport { mongoProperty } from '../../../client/mongoProperty';\nimport { AdminComponent } from '../../../AdminComponent';\n_ = lodash;\n\n[ Surveys, Orders ] = AdminComponent.collections('Surveys', 'Orders');\n\nclass UserCtrl extends AdminComponent {\n\tconstructor($scope, $meteor, $reactive) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['users', 'surveys'],\n      helpers: {\n        user() {\n          return Meteor.users.findOne(this.userId);\n        },\n        surveys() {\n          return Surveys.find({userId:this.userId}).fetch();\n        }\n      }\n    });\n    this.autorun(() => {\n      if (!this.inited && this.subscriptions.users.ready()) {\n        // this.order = Orders.findOne({_id:new Mongo.ObjectID(this.order)});\n        // this.user = Meteor.users.findOne({_id:this.order.userId});        \n        // mongoProperty(this, 'flagged', Orders, this.order, 'flagged', false);\n        this.inited = true;\n      }\n    });\n\t}\n\n  sendResetPasswordEmail() {\n    Meteor.call('sendResetPasswordEmail', this.userId);\n  }\n  // timeDisplay(time) {\n  //   return timeDisplay(time);\n  // }\n  // printInvoice() {\n  //   window.open(Meteor.settings.public.userDashboardUrl + 'api/admin/invoices?orders=' + this.order._id._str);\n  // }\n}\n\nexport default angular.module('user', [\n  angularMeteor\n])\n  .component('user', {\n    templateUrl: template,\n    controller: UserCtrl,\n    bindings: {\n      userId: '<',\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/users/view/template.html\";\n      var template = \" <!-- { \\\"_id\\\" : { \\\"$oid\\\" : \\\"f0fdfc7d276c896305a79663\\\" }, \\\"occupation\\\" : \\\"Personal Fitness Trainer\\\", \\\"favoriteActivity\\\" : \\\"Stay at home and chilled.\\\", \\\"careMostAbout\\\" : \\\"my family\\\", \\\"millionDollars\\\" : \\\"Invest it in a overseas private property for passive income!\\\", \\\"goals\\\" : \\\"To Be A Better \\\\\\\"Me\\\\\\\" than yesterday. \\\", \\\"userId\\\" : \\\"FMaHdAvgPNLrRNTLC\\\" } --> <p ng-if=\\\"$ctrl.loading\\\">Loading...</p> <div ng-if=\\\"!$ctrl.loading\\\"> <button ng-click=\\\"$ctrl.sendResetPasswordEmail()\\\">Send Reset Password Email</button> <div class=\\\"-attribute\\\"> <label>Email:</label> <span class=\\\"-value\\\">{{$ctrl.user.username}}</span> </div> <div class=\\\"-attribute\\\"> <label>Name:</label> <span class=\\\"-value\\\">{{$ctrl.user.profile.firstName}} {{$ctrl.user.profile.surname}}</span> </div> <div class=\\\"-attribute\\\"> <label>Phone Number:</label> <span class=\\\"-value\\\">{{$ctrl.user.profile.phoneNumber}}</span> </div> <div class=\\\"-attribute addresses\\\"> <label>Addresses:</label> <ul class=\\\"addresses\\\"> <li ng-repeat=\\\"address in $ctrl.user.profile.deliveryAddresses\\\" ng-class=\\\"{selected:$index == $ctrl.user.profile.selectedDeliveryAddress}\\\"> {{address.address}} {{address.postalCode}} </li> </ul> </div> <div class=\\\"-attribute surveys\\\"> <label>Surveys:</label> <ul> <li ng-repeat=\\\"survey in $ctrl.surveys\\\"> <div class=\\\"-attribute\\\"> <label>Occupation:</label> <span class=\\\"-value\\\">{{survey.occupation}}</span> </div> <div class=\\\"-attribute\\\"> <label>Favourite activity to do on a bright Sunday afternoon:</label> <span class=\\\"-value\\\">{{survey.favoriteActivity}}</span> </div> <div class=\\\"-attribute\\\"> <label>I care most about:</label> <span class=\\\"-value\\\">{{survey.careMostAbout}}</span> </div> <div class=\\\"-attribute\\\"> <label>If I had a million dollars:</label> <span class=\\\"-value\\\">{{survey.millionDollars}}</span> </div> <div class=\\\"-attribute\\\"> <label>My goals are:</label> <span class=\\\"-value\\\">{{survey.goals}}</span> </div> </li> </ul> </div> <h2>Orders</h2> <orders user-id=\\\"$ctrl.userId\\\"></orders> </div> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport pages from '../../pages';\nimport { BundleTypes } from '../../api/bundleTypes';\nimport { Portions } from '../../api/portions';\nimport { MealPlans } from '../../api/mealPlans';\n\n_ = lodash;\n\nclass AdminCtrl {\n\tconstructor($scope, $meteor, $reactive, $compile, $element, $timeout, $rootScope) {\n    $scope.viewModel(this);\n    $reactive(this).attach($scope);\n    this.subscribe('users');\n\t\tthis.page = null;\n    this.today = new Date();\n\n    $meteor.autorun($scope, () => {\n      this.user = Meteor.user();\n      var name = FlowRouter.getRouteName();\n      switch (name) {\n      \tcase 'order':\n      \t\tthis.order = FlowRouter.getParam('orderId');\n          break;\n      }\n      this.page = name;\n      // var template = pages[this.page].template;\n      // var el = $compile(template)($scope);\n      // $element.find('.main').html('').append(el);\n    });\n\n    $scope.$watch('$ctrl.page', () => {\n      this.initMain();\n    }, true);\n\n    this.$compile = $compile;\n    this.$scope = $scope;\n    this.$element = $element;\n\t}\n\n  param(param) {\n    return FlowRouter.getParam(param);\n  }\n\n  initMain() {\n    if (this.pageScope) {\n      this.pageScope.$destroy();\n    }\n\n    if (pages[this.page]) {\n      this.pageTitle = pages[this.page].title;\n      \n      var template = pages[this.page].template;\n      this.pageScope = this.$scope.$new();\n      var el = this.$compile(template)(this.pageScope);\n\n      this.$element.find('.main .body').html('').append(el);\n    }\n  }\n}\n\nexport default angular.module('admin', [\n  angularMeteor,\n  'accounts.ui',\n].concat(_.transform(pages, (modules, module) => {\n    modules.push(module.module.default.name);\n  }, [])))\n  .filter('image', function() {\n    return function(value) {\n      return Meteor.settings.public.imageServerUrl + '/image.php?image=' + value;\n    };\n  })\n  .filter('upperFirst', function() {\n    return (value) => {\n      return _.upperFirst(value);\n    };\n  })\n  .directive('upload', function($parse) {\n    return {\n      scope: true,\n      link(scope, element, attrs) {\n        var invoker = $parse(attrs.upload);\n        element.change(function() {\n          var fileReader = new FileReader;\n          fileReader.onloadend = (evt) => {\n            var data = (fileReader.result || evt.srcElement.result || evt.target.result).split(',')[1];\n            Meteor.call('uploadImage', {\n              data: data,\n              type: attrs.uploadType\n            }, (err, res) => {\n              this.value = '';\n              invoker(scope, res);\n              scope.$apply();\n            });\n          };\n          fileReader.readAsDataURL(this.files[0]);\n        });\n      }\n    };\n  })\n  .component('admin', {\n    templateUrl: template,\n    controller: AdminCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/admin/template.html\";\n      var template = \"<div class=\\\"header\\\"> <h1>Fitness Ration Admin</h1> <login-buttons></login-buttons> </div> <div class=\\\"body\\\" ng-if=\\\"$ctrl.user.role == 'admin'\\\"> <div class=\\\"side-nav\\\"> <ul class=\\\"nav\\\"> <li> <a href=\\\"/orders\\\" ng-class=\\\"{active:$ctrl.page == 'orders'}\\\">Orders</a> (<a href=\\\"/orders/add\\\" ng-class=\\\"{active:$ctrl.page == 'addOrder'}\\\">Add</a>) </li> <li> Inventory <ul> <li><a href=\\\"/inventory/status/overview\\\" ng-class=\\\"{active:$ctrl.page == 'inventoryStatus'}\\\">Status</a></li> <li><a href=\\\"/inventory/anomaly-triggers\\\" ng-class=\\\"{active:$ctrl.page == 'anomalyTriggers'}\\\">Anomaly Triggers</a></li> </ul> </li> <li> Products <ul> <li> <a href=\\\"/products/meals\\\" ng-class=\\\"{active:$ctrl.page == 'meals'}\\\">Meals</a> (<a href=\\\"/products/meals/add\\\" ng-class=\\\"{active:$ctrl.page == 'addMeal'}\\\">Add</a>) <ul> <li> <a href=\\\"/products/sides\\\" ng-class=\\\"{active:$ctrl.page == 'sides'}\\\">Sides</a> (<a href=\\\"/products/sides/add\\\" ng-class=\\\"{active:$ctrl.page == 'addSide'}\\\">Add</a>) </li> <li> <a href=\\\"/products/ingredients\\\" ng-class=\\\"{active:$ctrl.page == 'ingredients'}\\\">Ingredients</a> (<a href=\\\"/products/ingredients/add\\\" ng-class=\\\"{active:$ctrl.page == 'addIngredient'}\\\">Add</a>) </li> </ul> </li> <li><a href=\\\"/products/meal-plans\\\" ng-class=\\\"{active:$ctrl.page == 'mealPlans'}\\\">Meal Plans</a> (<a href=\\\"/products/meal-plans/add\\\" ng-class=\\\"{active:$ctrl.page == 'addMealPlan'}\\\">Add</a>)</li> <li><a href=\\\"/products/portions\\\" ng-class=\\\"{active:$ctrl.page == 'portions'}\\\">Portions</a> (<a href=\\\"/products/portions/add\\\" ng-class=\\\"{active:$ctrl.page == 'addPortion'}\\\">Add</a>)</li> <li><a href=\\\"/products/bundle-types\\\" ng-class=\\\"{active:$ctrl.page == 'bundleTypes'}\\\">Bundle Types</a> (<a href=\\\"/products/bundle-types/add\\\" ng-class=\\\"{active:$ctrl.page == 'addBundleType'}\\\">Add</a>)</li> <li><a href=\\\"/products/add-ons\\\" ng-class=\\\"{active:$ctrl.page == 'addOns'}\\\">Add-ons</a> (<a href=\\\"/products/add-ons/add\\\" ng-class=\\\"{active:$ctrl.page == 'addAddOn'}\\\">Add</a>)</li> </ul> </li> <li> Fulfillment <ul> <li><a href=\\\"/fulfillment/capacity\\\" ng-class=\\\"{active:$ctrl.page == 'fulfillmentCapacity'}\\\">Capacity</a></li> <li><a href=\\\"/fulfillment/schedule\\\" ng-class=\\\"{active:$ctrl.page == 'fulfillmentSchedule'}\\\">Schedule</a></li> <li><a href=\\\"/fulfillment/charges\\\" ng-class=\\\"{active:$ctrl.page == 'fulfillmentCharges'}\\\">Charges</a></li> <li><a href=\\\"/fulfillment/settings\\\" ng-class=\\\"{active:$ctrl.page == 'fulfillmentSettings'}\\\">Settings</a></li> </ul> </li> <li> <a href=\\\"/promotions\\\" ng-class=\\\"{active:$ctrl.page == 'promotions'}\\\">Promotions</a> (<a href=\\\"/promotions/add\\\" ng-class=\\\"{active:$ctrl.page == 'addPromotion'}\\\">Add</a>) </li> <li><a href=\\\"/partners\\\" ng-class=\\\"{active:$ctrl.page == 'partners'}\\\">Partners</a> (<a href=\\\"/partners/add\\\" ng-class=\\\"{active:$ctrl.page == 'addPartner'}\\\">Add</a>)</li> <li><a href=\\\"/users\\\" ng-class=\\\"{active:$ctrl.page == 'users'}\\\">Users</a></li> </ul> </div> <div class=\\\"main\\\"> <div class=\\\"header\\\"> <h1>{{$ctrl.pageTitle}}</h1> <span class=\\\"date\\\">{{$ctrl.today | date:'d MMM yyyy'}}</span> </div> <div class=\\\"body\\\" ng-init=\\\"$ctrl.initMain()\\\"></div> </div> </div> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { TimeSlots } from '../../api/timeSlots';\nimport { EditGuards } from '../../client/EditGuards';\n_ = lodash;\n\nclass FulfillmentCapacityCtrl {\n\tconstructor($scope, $meteor, $reactive) {\n    $scope.viewModel(this);\n    $reactive(this).attach($scope);\n    this.timeSlots = [];\n    this.subscribe('timeSlots');\n    this.times = [];\n    for (var i = 7; i <= 22; ++ i) {\n      this.times.push(_.padStart(i, 2, '0') + ':00');\n    }\n    this.helpers({\n      timeSlots() {\n        return TimeSlots.find();\n      }\n    });\n\n    this.editGuards = new EditGuards({\n      timeSlots: {\n        collection: TimeSlots\n      }\n    });\n\t}\n  amPm(time) {\n    var date = new Date(Date.parse('Jan 1 ' + time));\n    var hours = date.getHours();\n    var suffix = hours >= 12 ? \"PM\":\"AM\";\n    hours = ((hours + 11) % 12 + 1); \n\n    return hours + ':' + _.padStart(date.getMinutes(), 2, 0) + ' ' + suffix;\n  }\n  addTimeSlot() {\n    this.newTimeSlot = {\n      days:{0:false, 1:false, 2:false, 3:false, 4:false, 5:false, 6:false},\n      start:null,\n      end:null,\n      capacity:null\n    };\n  }\n  saveTimeSlot() {\n    TimeSlots.insert(this.newTimeSlot);\n    delete this.newTimeSlot;\n  }\n  cancelAdd() {\n    delete this.newTimeSlot;\n  }\n\n  save(object) {\n    this.editGuards.save(object);\n  }\n  cancel(object) {\n    this.editGuards.cancel(object);\n  }\n  delete(object) {\n    this.editGuards.delete(object);\n  }\n  hasChanges(object) {\n    return this.editGuards.hasChanges(object);\n  }\n}\n\nexport default angular.module('fulfillmentcapacity', [\n  angularMeteor\n])\n  .filter('editGuard', EditGuards.filter)\n  .component('fulfillmentcapacity', {\n    templateUrl: template,\n    controller: FulfillmentCapacityCtrl,\n    bindings: {\n      order: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/fulfillment-capacity/template.html\";\n      var template = \"<h2>Time Slots</h2> <ul class=\\\"-items time-slots\\\"> <li ng-repeat=\\\"timeSlot in $ctrl.timeSlots | editGuard:$ctrl.editGuards:'timeSlots'\\\"> <div class=\\\"-section time-block\\\"> <h3>Time per day</h3> <div class=\\\"-field\\\"> <label>Start</label> <select ng-model=\\\"timeSlot.start\\\" ng-options=\\\"$ctrl.amPm(time) for time in $ctrl.times\\\"></select> </div> <div class=\\\"-field\\\"> <label>End</label> <select ng-model=\\\"timeSlot.end\\\" ng-options=\\\"$ctrl.amPm(time) for time in $ctrl.times\\\"></select> </div> </div> <div class=\\\"-section days\\\"> <h3>Days per week</h3> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"timeSlot.days[0]\\\" type=\\\"checkbox\\\"> <label>Sunday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"timeSlot.days[1]\\\" type=\\\"checkbox\\\"> <label>Monday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"timeSlot.days[2]\\\" type=\\\"checkbox\\\"> <label>Tuesday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"timeSlot.days[3]\\\" type=\\\"checkbox\\\"> <label>Wednesday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"timeSlot.days[4]\\\" type=\\\"checkbox\\\"> <label>Thursday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"timeSlot.days[5]\\\" type=\\\"checkbox\\\"> <label>Friday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"timeSlot.days[6]\\\" type=\\\"checkbox\\\"> <label>Saturday</label> </div> </div> <div class=\\\"-section capacity\\\"> <h3>Capacity</h3> <div class=\\\"-field\\\"> <label>Order limit</label> <input ng-model=\\\"timeSlot.capacity\\\" type=\\\"text\\\"> </div> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.save(timeSlot)\\\" ng-if=\\\"$ctrl.hasChanges(timeSlot)\\\">Save</button> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.cancel(timeSlot)\\\" ng-if=\\\"$ctrl.hasChanges(timeSlot)\\\">Cancel</button> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete(timeSlot)\\\">Delete</button> </div> </li> <li ng-if=\\\"$ctrl.newTimeSlot\\\"> <div class=\\\"-section time-block\\\"> <h3>Time per day</h3> <div class=\\\"-field\\\"> <label>Start</label> <select ng-model=\\\"$ctrl.newTimeSlot.start\\\" ng-options=\\\"$ctrl.amPm(time) for time in $ctrl.times\\\"></select> </div> <div class=\\\"-field\\\"> <label>End</label> <select ng-model=\\\"$ctrl.newTimeSlot.end\\\" ng-options=\\\"$ctrl.amPm(time) for time in $ctrl.times\\\"></select> </div> </div> <div class=\\\"-section days\\\"> <h3>Days per week</h3> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"$ctrl.newTimeSlot.days[0]\\\" type=\\\"checkbox\\\"> <label>Sunday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"$ctrl.newTimeSlot.days[1]\\\" type=\\\"checkbox\\\"> <label>Monday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"$ctrl.newTimeSlot.days[2]\\\" type=\\\"checkbox\\\"> <label>Tuesday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"$ctrl.newTimeSlot.days[3]\\\" type=\\\"checkbox\\\"> <label>Wednesday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"$ctrl.newTimeSlot.days[4]\\\" type=\\\"checkbox\\\"> <label>Thursday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"$ctrl.newTimeSlot.days[5]\\\" type=\\\"checkbox\\\"> <label>Friday</label> </div> <div class=\\\"-field\\\"> <input class=\\\"-input\\\" ng-model=\\\"$ctrl.newTimeSlot.days[6]\\\" type=\\\"checkbox\\\"> <label>Saturday</label> </div> </div> <div class=\\\"-section capacity\\\"> <h3>Capacity</h3> <div class=\\\"-field\\\"> <label>Order limit</label> <input ng-model=\\\"$ctrl.newTimeSlot.capacity\\\" type=\\\"text\\\"> </div> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.saveTimeSlot()\\\">Save</button> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.cancelAdd()\\\">Cancel</button> </div> </li> </ul> <button class=\\\"-button add\\\" ng-click=\\\"$ctrl.addTimeSlot()\\\">Add New</button>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { LocationSurcharges } from '../../api/locationSurcharges';\nimport { FulfillmentSettings } from '../../api/fulfillmentSettings';\nimport { EditGuards } from '../../client/EditGuards';\n\n_ = lodash;\n\nclass FulfillmentChargesCtrl {\n\tconstructor($scope, $meteor, $reactive) {\n    $scope.viewModel(this);\n    $reactive(this).attach($scope);\n    this.subscribe('locationSurcharges');\n    var fulfillmentSettingsSub = this.subscribe('fulfillmentSettings');\n    this.autorun(() => {\n      if (!this.inited && fulfillmentSettingsSub.ready()) {\n        this.inited = true;\n        this.fulfillmentSettings = FulfillmentSettings.findOne({});\n        this.freeDeliveryThreshold = this.fulfillmentSettings.freeDeliveryThreshold;\n        this.deliveryFee = this.fulfillmentSettings.deliveryFee;\n      }\n    });\n    this.helpers({\n      locationSurcharges() {\n        return LocationSurcharges.find();\n      },\n      fulfillmentSettingsDoc() {\n        return FulfillmentSettings.findOne({});\n      }\n    });\n    this.editGuards = new EditGuards({\n      locationSurcharges: {\n        collection: LocationSurcharges\n      }\n    });\n\t}\n\n  addNewLocationSurcharge() {\n    this.newLocationSurcharge = {};\n  }\n  cancelNewLocationSurcharge() {\n    delete this.newLocationSurcharge;\n  }\n  saveNewLocationSurcharge() {\n    LocationSurcharges.insert(this.newLocationSurcharge);\n    delete this.newLocationSurcharge;\n  }\n\n  save(object) {\n    this.editGuards.save(object);\n  }\n  cancel(object) {\n    this.editGuards.cancel(object);\n  }\n  delete(object) {\n    this.editGuards.delete(object);\n  }\n  hasChanges(object) {\n    return this.editGuards.hasChanges(object);\n  }\n\n  freeDeliveryThreshold_save() {\n    this.fulfillmentSettings.freeDeliveryThreshold = this.freeDeliveryThreshold;\n    FulfillmentSettings.update({_id:this.fulfillmentSettings._id}, {$set:{'freeDeliveryThreshold':this.freeDeliveryThreshold, 'timestamps.freeDeliveryThreshold':new Date()}});\n  }\n  freeDeliveryThreshold_cancel() {\n    this.freeDeliveryThreshold = this.fulfillmentSettings.freeDeliveryThreshold;\n  }\n  freeDeliveryThreshold_hasChanges() {\n    return this.fulfillmentSettings && this.freeDeliveryThreshold != this.fulfillmentSettings.freeDeliveryThreshold;\n  }\n\n  deliveryFee_save() {\n    this.fulfillmentSettings.deliveryFee = this.deliveryFee;\n    FulfillmentSettings.update({_id:this.fulfillmentSettings._id}, {$set:{'deliveryFee':this.deliveryFee, 'timestamps.deliveryFee':new Date()}});\n  }\n  deliveryFee_cancel() {\n    this.deliveryFee = this.fulfillmentSettings.deliveryFee;\n  }\n  deliveryFee_hasChanges() {\n    return this.fulfillmentSettings && this.deliveryFee != this.fulfillmentSettings.deliveryFee;\n  }\n}\n\nexport default angular.module('fulfillmentcharges', [\n  angularMeteor\n])\n  .filter('editGuard', EditGuards.filter)\n  .component('fulfillmentcharges', {\n    templateUrl: template,\n    controller: FulfillmentChargesCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/fulfillment-charges/template.html\";\n      var template = \"<div class=\\\"-section delivery-fee\\\"> <h2>Delivery Fee</h2> $<input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.deliveryFee\\\"> per delivery <div class=\\\"last-updated\\\" ng-if=\\\"$ctrl.fulfillmentSettingsDoc.timestamps.deliveryFee\\\"> <label>Last Updated:</label> <span class=\\\"value\\\">{{$ctrl.fulfillmentSettingsDoc.timestamps.deliveryFee | date:'d MMM yyyy h:mma'}}</span> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.deliveryFee_cancel()\\\" ng-if=\\\"$ctrl.deliveryFee_hasChanges()\\\">Cancel</button> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.deliveryFee_save()\\\" ng-if=\\\"$ctrl.deliveryFee_hasChanges()\\\">Save</button> </div> </div> <div class=\\\"-section free-delivery\\\"> <h2>Free Delivery</h2> <p>Free delivery for orders containing</p> <p>Above <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.freeDeliveryThreshold\\\"> meals per order</p> <div class=\\\"last-updated\\\" ng-if=\\\"$ctrl.fulfillmentSettingsDoc.timestamps.freeDeliveryThreshold\\\"> <label>Last Updated:</label> <span class=\\\"value\\\">{{$ctrl.fulfillmentSettingsDoc.timestamps.freeDeliveryThreshold | date:'d MMM yyyy h:mma'}}</span> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.freeDeliveryThreshold_cancel()\\\" ng-if=\\\"$ctrl.freeDeliveryThreshold_hasChanges()\\\">Cancel</button> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.freeDeliveryThreshold_save()\\\" ng-if=\\\"$ctrl.freeDeliveryThreshold_hasChanges()\\\">Save</button> </div> </div> <div class=\\\"-section location-surcharges\\\"> <h2>Location Surcharges</h2> <ul class=\\\"-items\\\"> <li ng-repeat=\\\"locationSurcharge in $ctrl.locationSurcharges | editGuard:$ctrl.editGuards:'locationSurcharges'\\\"> <h3>Delivery Location</h3> <p>Postal codes beginning with <input ng-model=\\\"locationSurcharge.postalPrefix\\\" type=\\\"text\\\"></p> <h3>Additional Delivery Surcharge</h3> <input class=\\\"-input\\\" ng-model=\\\"locationSurcharge.surcharge\\\" type=\\\"text\\\"> <div class=\\\"-group buttons\\\"> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.save(locationSurcharge)\\\" ng-if=\\\"$ctrl.hasChanges(locationSurcharge)\\\">Save</button> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.cancel(locationSurcharge)\\\" ng-if=\\\"$ctrl.hasChanges(locationSurcharge)\\\">Cancel</button> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete(locationSurcharge)\\\">Delete</button> </div> </li> <li ng-if=\\\"$ctrl.newLocationSurcharge\\\"> <h3>Delivery Location</h3> <p>Postal codes beginning with <input ng-model=\\\"$ctrl.newLocationSurcharge.postalPrefix\\\" type=\\\"text\\\"></p> <h3>Additional Delivery Surcharge</h3> <input class=\\\"-input\\\" ng-model=\\\"$ctrl.newLocationSurcharge.surcharge\\\" type=\\\"text\\\"> <div class=\\\"-group buttons\\\"> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.saveNewLocationSurcharge()\\\">Save</button> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.cancelNewLocationSurcharge()\\\">Cancel</button> </div> </li> </ul> <button class=\\\"-button add\\\" ng-click=\\\"$ctrl.addNewLocationSurcharge()\\\">Add</button> </div>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { Blocks } from '../../api/blocks';\nimport { Orders } from '../../api/orders';\nimport { TimeSlots } from '../../api/timeSlots';\nimport { EditGuards } from '../../client/EditGuards';\nimport { weeksForMonth, today, formatDate } from '../../date';\nimport { monthName } from '../../helpers';\n\n_ = lodash;\n\nfunction amPm(time, appendSuffix=true) {\n  var date = new Date(Date.parse('Jan 1 ' + time));\n  var hours = date.getHours();\n  var suffix = hours >= 12 ? \"pm\":\"am\";\n  hours = ((hours + 11) % 12 + 1); \n\n  return hours + (appendSuffix ? '' + suffix : '');\n}\n\nclass FulfillmentScheduleCtrl {\n\tconstructor($scope, $meteor, $reactive) {\n    $scope.viewModel(this);\n    $reactive(this).attach($scope);\n    this.month = new Date();\n    this.today = today();\n    this.weeks = weeksForMonth(this.month);\n\n    var blocksSub = this.subscribe('blocks');\n    var ordersSub = this.subscribe('orders');\n    var timeSlotsSub = this.subscribe('timeSlots');\n\n    this.ordersForDate = {};\n    this.timeSlots = {};\n\n    this.dates = {};\n\n    this.autorun(() => {\n      var month = this.getReactively('month');\n      if (blocksSub.ready() && ordersSub.ready() && timeSlotsSub.ready()) {\n        this.timeSlots = {};\n        TimeSlots.find().forEach((timeSlot) => {\n          this.timeSlots[timeSlot._id._str] = timeSlot;\n        });\n        var minDate = new Date(month.getFullYear(), month.getMonth(), 1);\n        var maxDate = new Date(month.getFullYear(), month.getMonth() + 1, 1);\n        var query = {state:'completed'};\n        query['deliveryOptions.date'] = {$gte:formatDate(minDate), $lt:formatDate(maxDate)};\n        var orders = Orders.find(query).fetch();\n        this.ordersForDate = {};\n        this.dates = {};\n        for (var order of orders) {\n          if (!this.ordersForDate[order.deliveryOptions.date]) {\n            this.ordersForDate[order.deliveryOptions.date] = [];\n          }\n          this.ordersForDate[order.deliveryOptions.date].push(order);\n        }\n      }\n    });\n    this.helpers({\n      blocks() {\n        return Blocks.find();\n      }\n    });\n    this.editGuards = new EditGuards({\n      blocks: {\n        collection: Blocks\n      }\n    });\n\t}\n\n  monthName(month) {\n    return monthName(month);\n  }\n\n  prevMonth() {\n    this.month = new Date(this.month.getFullYear(), this.month.getMonth() - 1, 1, 0, 0, 0);\n    this.weeks = weeksForMonth(this.month);\n  }\n\n  nextMonth() {\n    this.month = new Date(this.month.getFullYear(), this.month.getMonth() + 1, 1, 0, 0, 0);\n    this.weeks = weeksForMonth(this.month);\n  }\n\n  blocked(date) {\n    for (var block of this.blocks) {\n      if (date.valueOf() >= block.start.valueOf() && date.valueOf() <= block.end.valueOf()) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  orderSummaryForDate(date) {\n    var date = formatDate(date);\n    if (this.dates[date] && this.dates[date].summary) {\n      return this.dates[date].summary;\n    }\n    else {\n      if (!this.dates[date]) this.dates[date] = {};\n      return this.dates[date].summary = this.summarize(this.ordersForDate[date]);\n    }\n  }\n\n  summarize(orders) {\n    if (orders) {\n      var grouped = {};\n      for (var order of orders) {\n        var key = order.deliveryOptions.time._id._str;\n        if (!grouped[key]) grouped[key] = [];\n        grouped[key].push(order);\n      }\n\n      var list = [];\n      for (var key in grouped) {\n        var timeSlot = this.timeSlots[key];\n        if (timeSlot) {\n          list.push({timeSlot:amPm(timeSlot.start, false) + '-' + amPm(timeSlot.end), orders:grouped[key].length + ' orders'});          \n        }\n      }\n      return list;\n    }\n    else {\n      return [];\n    }\n  }\n\n  addNewBlock() {\n    this.newBlock = {};\n  }\n  cancelNewBlock() {\n    delete this.newBlock;\n  }\n  saveNewBlock() {\n    Blocks.insert(this.newBlock);\n    delete this.newBlock;\n  }\n\n  save(object) {\n    this.editGuards.save(object);\n  }\n  cancel(object) {\n    this.editGuards.cancel(object);\n  }\n  delete(object) {\n    this.editGuards.delete(object);\n  }\n  hasChanges(object) {\n    return this.editGuards.hasChanges(object);\n  }\n}\n\nexport default angular.module('fulfillmentschedule', [\n  angularMeteor\n])\n  .filter('editGuard', EditGuards.filter)\n  .component('fulfillmentschedule', {\n    templateUrl: template,\n    controller: FulfillmentScheduleCtrl,\n    bindings: {\n      order: '<'\n    }\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/fulfillment-schedule/template.html\";\n      var template = \"<div class=\\\"-section calendar\\\"> <h2>Calendar</h2> <div class=\\\"calendar\\\"> <div class=\\\"header\\\"> <button ng-click=\\\"$ctrl.prevMonth()\\\">Prev</button> <span class=\\\"month\\\">{{$ctrl.monthName($ctrl.month.getMonth())}} {{$ctrl.month.getFullYear()}}</span> <button ng-click=\\\"$ctrl.nextMonth()\\\">Next</button> </div> <div class=\\\"weekdays\\\"> <span class=\\\"weekday\\\">Sunday</span> <span class=\\\"weekday\\\">Monday</span> <span class=\\\"weekday\\\">Tuesday</span> <span class=\\\"weekday\\\">Wednesday</span> <span class=\\\"weekday\\\">Thursday</span> <span class=\\\"weekday\\\">Friday</span> <span class=\\\"weekday\\\">Saturday</span> </div> <div class=\\\"week\\\" ng-repeat=\\\"week in $ctrl.weeks\\\"> <span class=\\\"date\\\" ng-repeat=\\\"date in week\\\" ng-class=\\\"{'other-month':date.getMonth() != $ctrl.month.getMonth(), today: date.valueOf() == $ctrl.today.valueOf(), blocked: $ctrl.blocked(date)}\\\"> <span class=\\\"number\\\">{{date.getDate()}}</span> <ul class=\\\"order-summary\\\"> <li ng-repeat=\\\"line in $ctrl.orderSummaryForDate(date)\\\"><span class=\\\"time-slot\\\">{{line.timeSlot}}</span> <span class=\\\"orders\\\">{{line.orders}}</span></li> </ul> </span> </div> </div> </div> <div class=\\\"-section blocks\\\"> <h2>Blocks</h2> <ul class=\\\"-items\\\"> <li ng-repeat=\\\"block in $ctrl.blocks | editGuard:$ctrl.editGuards:'blocks'\\\"> <div class=\\\"-field\\\"> <label>Start</label> <input class=\\\"-input\\\" type=\\\"date\\\" ng-model=\\\"block.start\\\"> </div> <div class=\\\"-field\\\"> <label>End</label> <input class=\\\"-input\\\" type=\\\"date\\\" ng-model=\\\"block.end\\\"> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.save(block)\\\" ng-if=\\\"$ctrl.hasChanges(block)\\\">Save</button> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.cancel(block)\\\" ng-if=\\\"$ctrl.hasChanges(block)\\\">Cancel</button> <button class=\\\"-button delete\\\" ng-click=\\\"$ctrl.delete(block)\\\">Delete</button> </div> </li> <li ng-if=\\\"$ctrl.newBlock\\\"> <div class=\\\"-field\\\"> <label>Start</label> <input class=\\\"-input\\\" type=\\\"date\\\" ng-model=\\\"$ctrl.newBlock.start\\\"> </div> <div class=\\\"-field\\\"> <label>End</label> <input class=\\\"-input\\\" type=\\\"date\\\" ng-model=\\\"$ctrl.newBlock.end\\\"> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.saveNewBlock()\\\">Save</button> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.cancelNewBlock()\\\">Cancel</button> </div> </li> </ul> </div> <button class=\\\"-button add\\\" ng-click=\\\"$ctrl.addNewBlock()\\\">Add</button> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { FulfillmentSettings } from '../../api/fulfillmentSettings';\n\n_ = lodash;\n\nclass FulfillmentSettingsCtrl {\n\tconstructor($scope, $meteor, $reactive) {\n    $scope.viewModel(this);\n    $reactive(this).attach($scope);\n    var fulfillmentSettingsSub = this.subscribe('fulfillmentSettings');\n    this.autorun(() => {\n      if (!this.inited && fulfillmentSettingsSub.ready()) {\n        this.inited = true;\n        this.fulfillmentSettings = FulfillmentSettings.findOne({});\n        this.minDays = this.fulfillmentSettings.minDays;\n        this.cutoffTime = this.fulfillmentSettings.cutoffTime;\n      }\n    });\n    this.helpers({\n      fulfillmentSettingsDoc() {\n        return FulfillmentSettings.findOne({});\n      }\n    });\n\t}\n\n  minDays_save() {\n    this.fulfillmentSettings.minDays = this.minDays;\n    FulfillmentSettings.update({_id:this.fulfillmentSettings._id}, {$set:{'minDays':this.minDays, 'timestamps.minDays':new Date()}});\n  }\n  minDays_cancel() {\n    this.minDays = this.fulfillmentSettings.minDays;\n  }\n  minDays_hasChanges() {\n    return this.fulfillmentSettings && this.minDays != this.fulfillmentSettings.minDays;\n  }\n  \n  cutoffTime_save() {\n    this.fulfillmentSettings.cutoffTime = this.cutoffTime;\n    FulfillmentSettings.update({_id:this.fulfillmentSettings._id}, {$set:{'cutoffTime':this.cutoffTime, 'timestamps.cutoffTime':new Date()}});\n  }\n  cutoffTime_cancel() {\n    this.cutoffTime = this.fulfillmentSettings.cutoffTime;\n  }\n  cutoffTime_hasChanges() {\n    return this.fulfillmentSettings && this.cutoffTime != this.fulfillmentSettings.cutoffTime;\n  }\n}\n\nexport default angular.module('fulfillmentsettings', [\n  angularMeteor\n])\n  // .filter('editGuard', EditGuards.filter)\n  .component('fulfillmentsettings', {\n    templateUrl: template,\n    controller: FulfillmentSettingsCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/fulfillment-settings/template.html\";\n      var template = \"<div class=\\\"-section min-days\\\"> <h2>Min Days</h2> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.minDays\\\"> <div class=\\\"last-updated\\\" ng-if=\\\"$ctrl.fulfillmentSettingsDoc.timestamps.minDays\\\"> <label>Last Updated:</label> <span class=\\\"value\\\">{{$ctrl.fulfillmentSettingsDoc.timestamps.minDays | date:'d MMM yyyy h:mma'}}</span> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.minDays_cancel()\\\" ng-if=\\\"$ctrl.minDays_hasChanges()\\\">Cancel</button> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.minDays_save()\\\" ng-if=\\\"$ctrl.minDays_hasChanges()\\\">Save</button> </div> </div> <div class=\\\"-section min-days\\\"> <h2>Cutoff Time</h2> <input class=\\\"-input\\\" type=\\\"text\\\" ng-model=\\\"$ctrl.cutoffTime\\\"> <div class=\\\"last-updated\\\" ng-if=\\\"$ctrl.fulfillmentSettingsDoc.timestamps.cutoffTime\\\"> <label>Last Updated:</label> <span class=\\\"value\\\">{{$ctrl.fulfillmentSettingsDoc.timestamps.cutoffTime | date:'d MMM yyyy h:mma'}}</span> </div> <div class=\\\"-group buttons\\\"> <button class=\\\"-button cancel\\\" ng-click=\\\"$ctrl.cutoffTime_cancel()\\\" ng-if=\\\"$ctrl.cutoffTime_hasChanges()\\\">Cancel</button> <button class=\\\"-button save\\\" ng-click=\\\"$ctrl.cutoffTime_save()\\\" ng-if=\\\"$ctrl.cutoffTime_hasChanges()\\\">Save</button> </div> </div> \";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport template from './template.html';\nimport { StockCache } from '../../api/stockCache';\nimport { MealStock } from '../../api/mealStock';\nimport { formatDate, timeDisplay, mealSales, monthName } from '../../helpers';\nimport { addDays, convertToDate, today, calendarDaysForMonth } from '../../date';\nimport { StockCalculator } from '../../StockCalculator';\n\nimport { AdminComponent } from '../../AdminComponent';\n\n_ = lodash;\n\n[ MealPlans, Portions, Orders, Meals ] = AdminComponent.collections('MealPlans', 'Portions', 'Orders', 'Meals');\n\nclass InventoryStatusCtrl extends AdminComponent {\n  constructor($scope, $meteor, $reactive, $http) {\n    super($scope, $meteor, $reactive, {\n      subscriptions: ['futureOrders', 'meals'],\n      uses: ['mealPlans', 'portions'],\n      onSubscribed() {\n        console.log('okay');\n      },\n      helpers: {\n        meals() {\n          switch (this.getReactively('timeView')) {\n            case 'day': \n              var filter = this.getReactively('filter');\n              var query = {};\n              if (filter) {\n                var mealPlans = MealPlans.find({name:new RegExp(filter, 'i')}).fetch().map(mealPlan => mealPlan._id);\n                var portions = Portions.find({name:new RegExp(filter, 'i')}).fetch().map(portion => portion._id);\n                query.$or = [{name:new RegExp(filter, 'i')}, {sku:new RegExp(filter, 'i')}, {mealPlan:{$in:mealPlans}}, {portion:{$in:portions}}];\n              }\n              return Meals.find(query).fetch();\n\n            case 'month':\n              var portion = this.getReactively('portionFilter');\n              var mealPlan = this.getReactively('mealPlanFilter');\n              if (portion && mealPlan) {\n                return Meals.find({portion:new Mongo.ObjectID(portion), mealPlan:new Mongo.ObjectID(mealPlan)});\n              }\n              else {\n                return [];\n              }\n          }\n        }\n      }\n    });\n    this.view = 'overview';\n\n    this._subscribe('mealStockForDates', () => [today(), today()]);\n\n    this._subscribe('mealStockForDates', () => [this.getReactively('date'), this.getReactively('date')]);\n\n    this.autorun(() => {\n      FlowRouter.watchPathChange();\n      this.view = FlowRouter.current().route.options.view;\n    });\n\n    Portions.find();\n    MealPlans.find();\n\n    this.date = new Date();\n\n    this._stockCalculators = {};\n\n    this.timeView = 'day';\n\n    this.days = calendarDaysForMonth(this.date, false);\n  }\n\n  pastDay() {\n    return this.date.valueOf() < today().valueOf();\n  }\n\n  stockTotal(meal) {\n    var total = 0;\n    for (var day of this.days) {\n      total += this.stockCalculator(meal).forDate(day).stock || 0;\n    }\n    return total;\n  }\n\n  monthName(month) {\n    return monthName(month);\n  }\n\n  stockCalculator(meal) {    \n    if (!this._stockCalculators[meal._id._str]) {\n      this._stockCalculators[meal._id._str] = new StockCalculator(meal._id);\n    }\n    return this._stockCalculators[meal._id._str];\n  }\n\n  export() {\n    window.open(`/api/export-inventory-status?filter=${this.filter || ''}&date=${formatDate(this.date)}`);\n  }\n\n  get propName() {\n    return ({\n      nonSales: 'Non-sales',\n      'restock': 'Restock',\n      adjustment: 'Adjustment'\n    })[this.view];\n  }\n}\n\nexport default angular.module('inventory-status', [\n  angularMeteor\n])\n  .controller('inventoryStatusItem', function($scope) {\n    var item = {};\n    var currentValue, prop;\n    var mealStock = MealStock.findOne({meal:$scope.meal._id, date:formatDate($scope.$ctrl.date)}) || {};\n\n    function reset() {\n      mealStock = MealStock.findOne({meal:$scope.meal._id, date:formatDate($scope.$ctrl.date)}) || {};\n      prop = $scope.$ctrl.view\n      currentValue = mealStock[prop] || 0;\n    }\n\n    $scope.$watch('$ctrl.view', reset, true);\n    $scope.$watch('$ctrl.date', reset, true);\n\n    Object.defineProperty(item, 'hasChanges', {\n      get: () => {\n        return (mealStock[prop] || 0) != currentValue;\n      }\n    });\n\n    item.save = () => {\n      var update = {};\n      mealStock[prop] = update[prop] = currentValue;\n      if (!mealStock.lastUpdated) mealStock.lastUpdated = {};\n      mealStock.lastUpdated[prop] = update['lastUpdated.' + prop] = new Date();\n      if (mealStock._id) {\n        MealStock.update({_id:mealStock._id}, {$set:update});        \n      }\n      else {\n        var values = {\n          date: formatDate($scope.$ctrl.date),\n          meal: $scope.meal._id,\n          lastUpdated: {}\n        };\n        values[prop] = currentValue;\n        values.lastUpdated[prop] = new Date();\n        MealStock.insert(values);\n      }\n\n\n      Meteor.call('clearStockCache');\n\n      delete $scope.$ctrl._stockCalculators[$scope.meal._id._str];\n    };\n\n    Object.defineProperty(item, 'lastUpdated', {\n      get: () => {\n        return mealStock.lastUpdated ? mealStock.lastUpdated[prop] : null\n      }\n    });\n\n    Object.defineProperty(item, 'value', {\n      get: () => {\n        return currentValue;\n      },\n      set: (value) => {\n        currentValue = value;\n      }\n    });\n    $scope.item = item;\n  })\n  .component('inventorystatus', {\n    templateUrl: template,\n    controller: InventoryStatusCtrl\n  });\n","\n      if (Meteor.isServer) return;\n\n      var templateUrl = \"/imports/components/inventory-status/template.html\";\n      var template = \"<div ng-if=\\\"$ctrl.loading\\\"> Loading... </div> <div ng-if=\\\"!$ctrl.loading\\\"> <ul class=\\\"view\\\"> <li ng-class=\\\"{active:$ctrl.timeView == 'day'}\\\" ng-click=\\\"$ctrl.timeView = 'day'; false\\\"><a href=\\\"#\\\">Day</a></li> <li ng-class=\\\"{active:$ctrl.timeView == 'month'}\\\" ng-click=\\\"$ctrl.timeView = 'month'; false\\\"><a href=\\\"#\\\">Month</a></li> </ul> <div class=\\\"month-view\\\" ng-if=\\\"$ctrl.timeView == 'month'\\\"> <select ng-model=\\\"$ctrl.mealPlanFilter\\\"> <option ng-repeat=\\\"mealPlan in $ctrl.mealPlans\\\" value=\\\"{{mealPlan._id._str}}\\\">{{mealPlan.name}}</option> </select> <select ng-model=\\\"$ctrl.portionFilter\\\"> <option ng-repeat=\\\"portion in $`ctrl.portions\\\" value=\\\"{{portion._id._str}}\\\">{{portion.name}}</option> </select> <div class=\\\"--scroll-view\\\"> <table> <tr> <th>Product Name</th> <th>Total</th> <th ng-repeat=\\\"day in $ctrl.days\\\"> {{day.getDate()}} {{$ctrl.monthName(day.getMonth()).substr(0, 3)}} </th> </tr> <tr ng-repeat=\\\"meal in $ctrl.meals\\\"> <td class=\\\"name\\\"><div>{{meal.name}}</div></td> <td>{{$ctrl.stockTotal(meal)}}</td> <td ng-repeat=\\\"day in $ctrl.days\\\"> {{$ctrl.stockCalculator(meal).forDate(day).stock}} </td> </tr> </table> </div> </div> <div class=\\\"day-view\\\" ng-if=\\\"$ctrl.timeView == 'day'\\\"> <ul class=\\\"tabs\\\"> <li ng-class=\\\"{active:$ctrl.view == 'overview'}\\\"><a href=\\\"/inventory/status/overview\\\">Overview</a></li> <li ng-if=\\\"!$ctrl.pastDay()\\\" ng-class=\\\"{active:$ctrl.view == 'adjustment'}\\\"><a href=\\\"/inventory/status/adjustment\\\">Adjustment</a></li> <li ng-if=\\\"!$ctrl.pastDay()\\\" ng-class=\\\"{active:$ctrl.view == 'nonSales'}\\\"><a href=\\\"/inventory/status/non-sales\\\">Non-sales</a></li> <li ng-if=\\\"!$ctrl.pastDay()\\\" ng-class=\\\"{active:$ctrl.view == 'restock'}\\\"><a href=\\\"/inventory/status/restock\\\">Restock</a></li> </ul> <div class=\\\"--top\\\"> <input class=\\\"search\\\" type=\\\"text\\\" placeholder=\\\"Search\\\" ng-model=\\\"$ctrl.filter\\\"> <input type=\\\"date\\\" ng-model=\\\"$ctrl.date\\\"> <button class=\\\"-button\\\" ng-click=\\\"$ctrl.export()\\\">Export</button> </div> <table ng-if=\\\"$ctrl.view == 'overview'\\\"> <tr> <th>Product Name</th> <th>Meal Plan</th> <th>Portion</th> <th>SKU</th> <th>Initial</th> <th>Sales</th> <th>Non-sales</th> <th>Output</th> <th>Restock</th> <th>Stock</th> </tr> <tr ng-repeat=\\\"meal in $ctrl.meals\\\"> <td>{{meal.name}}</td> <td>{{$ctrl.mealPlan(meal.mealPlan).name}}</td> <td>{{$ctrl.portion(meal.portion).name}}</td> <td>{{meal.sku}}</td> <td>{{$ctrl.stockCalculator(meal).forDate($ctrl.date).initial}}</td> <td>{{$ctrl.stockCalculator(meal).forDate($ctrl.date).sales}}</td> <td>{{$ctrl.stockCalculator(meal).forDate($ctrl.date).nonSales}}</td> <td>{{$ctrl.stockCalculator(meal).forDate($ctrl.date).output}}</td> <td>{{$ctrl.stockCalculator(meal).forDate($ctrl.date).restock}}</td> <td>{{$ctrl.stockCalculator(meal).forDate($ctrl.date).stock}}</td> </tr> </table> <div ng-if=\\\"$ctrl.view != 'overview'\\\"> <table> <tr> <th>Product Name</th> <th>Meal Plan</th> <th>Portion</th> <th>SKU</th> <th>Last Updated</th> <th>{{$ctrl.propName}}</th> </tr> <tr ng-repeat=\\\"meal in $ctrl.meals\\\" ng-controller=\\\"inventoryStatusItem\\\"> <td>{{meal.name}}</td> <td>{{$ctrl.mealPlan(meal.mealPlan).name}}</td> <td>{{$ctrl.portion(meal.portion).name}}</td> <td>{{meal.sku}}</td> <td>{{item.lastUpdated | date:'d MMM yyyy h:mma'}}</td> <td> <input size=\\\"3\\\" type=\\\"text\\\" ng-model=\\\"item.value\\\" ng-disabled=\\\"{{$ctrl.pastDay()}}\\\"> <button class=\\\"-button save\\\" ng-if=\\\"item.hasChanges\\\" ng-click=\\\"item.save()\\\">Save</button> </td> </tr> </table> </div> </div> </div>\";\n\n      angular.module('angular-templates')\n        .run(['$templateCache', function($templateCache) {\n          $templateCache.put(templateUrl, template);\n        }]);\n\n      module.exports = {};\n      module.exports.__esModule = true;\n      module.exports.default = templateUrl;\n    ","import { Mongo } from 'meteor/mongo';\n \nexport const AddOns = new Mongo.Collection('addOns', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('addOns', function() {\n  \treturn AddOns.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const AnomalyTriggers = new Mongo.Collection('anomalyTriggers', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('anomalyTriggers', function() {\n    return AnomalyTriggers.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const Blocks = new Mongo.Collection('blocks', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('blocks', function() {\n  \treturn Blocks.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const BundleTypes = new Mongo.Collection('bundleTypes', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('bundleTypes', function() {\n  \treturn BundleTypes.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const Deleted = new Mongo.Collection('deleted', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('deleted', function() {\n  \treturn Deleted.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const FulfillmentSettings = new Mongo.Collection('fulfillmentSettings', {idGeneration: 'MONGO'});\nFulfillmentSettings.attachSchema(new SimpleSchema({\n\tdeliveryFee: { type: Number, decimal: true },\n\t'timestamps.deliveryFee': { type: Date, optional: true },\n\n\tfreeDeliveryThreshold: { type: Number },\n\t'timestamps.freeDeliveryThreshold': { type: Date, optional: true },\n\n\tminDays: { type: Number },\n\t'timestamps.minDays': { type: Date, optional: true },\n\t\n\tcutoffTime: { type: Number },\n\t'timestamps.cutoffTime': { type: Date, optional: true },\n}), {transform:true});\n\nif (Meteor.isServer) {\n  Meteor.publish('fulfillmentSettings', () => {\n  \treturn FulfillmentSettings.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const Ingredients = new Mongo.Collection('ingredients', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('ingredients', function() {\n  \treturn Ingredients.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const LocationSurcharges = new Mongo.Collection('locationSurcharges', {idGeneration: 'MONGO'});\nLocationSurcharges.attachSchema(new SimpleSchema({\n\tsurcharge: { type: Number, decimal: true },\n\tpostalPrefix: { type: String }\n}), {transform:true});\n\nif (Meteor.isServer) {\n  Meteor.publish('locationSurcharges', function() {\n  \treturn LocationSurcharges.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const MealPlans = new Mongo.Collection('mealPlans', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('mealPlans', function() {\n  \treturn MealPlans.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\nimport { formatDate } from '../helpers';\n \nexport const MealStock = new Mongo.Collection('mealStock', {idGeneration: 'MONGO'});\nMealStock.attachSchema(new SimpleSchema({\n\tinitial: { type: Number, optional: true },\n\tadjustment: { type: Number, optional: true },\n\trestock: { type: Number, optional: true },\n\toutput: { type: Number, optional: true },\n\tsales: { type: Number, optional: true },\n\tnonSales: { type: Number, optional: true },\n\tstock: { type: Number, optional: true },\n\t\n\tlastUpdated: { type: Object, optional: true, blackbox: true },\n\tmeal: { type: Mongo.ObjectID },\n\tdate: { type: String },\n}), {transform:true});\n\nif (Meteor.isServer) {\n  Meteor.publish('mealStock', function() {\n  \treturn MealStock.find();\n  });\n\n  Meteor.publish('mealStockForDates', function(minDate, maxDate) {\n  \treturn MealStock.find({date:{$gte:formatDate(minDate), $lte:formatDate(maxDate)}});\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const Meals = new Mongo.Collection('meals', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('meals', function() {\n  \treturn Meals.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const Orders = new Mongo.Collection('orders', {idGeneration: 'MONGO'});\nimport { formatDate } from '../helpers';\n\nif (Meteor.isServer) {\n  Meteor.publish('orders', function() {\n  \treturn Orders.find();\n  });\n\n  Meteor.publish('ordersByDate', function(minDate, maxDate) {\n  \treturn Orders.find({'deliveryOptions.date':{$gte:formatDate(minDate), $lt:formatDate(maxDate)}});\n  });\n\n  Meteor.publish('orderById', function(id) {\n  \treturn Orders.find(id);\n  });\n\n  Meteor.publish('futureOrders', function(id) {\n  \treturn Orders.find({'deliveryOptions.date':{$gte:formatDate(new Date)}});\n  });\n}\n","import { Mongo } from 'meteor/mongo';\nexport const Partners = new Mongo.Collection('partners', {idGeneration: 'MONGO'});\nif (Meteor.isServer) {\n  Meteor.publish('partners', function() {\n  \treturn Partners.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const Portions = new Mongo.Collection('portions', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('portions', function() {\n  \treturn Portions.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const Promotions = new Mongo.Collection('promotions', {idGeneration: 'MONGO'});\nPromotions.attachSchema(new SimpleSchema({\n\tname: {type: String },\n\tdeliveryFee: { type: Boolean, defaultValue: false },\n\tstart: { type: String },\n\tend: { type: String },\n\tfulfillmentStart: { type: String, optional: true },\n\tfulfillmentEnd: { type: String, optional: true },\n\tdiscount: { type: Number, optional: true },\n\toverridePrice: { type: Number, optional: true, decimal: true },\n\ttype: { type: String },\n\tpromoCode: { type: String },\n\tsku: { type: String },\n\tusageLimit: { type: Number, optional: true },\n\n\tpremiumAllowance: { type: Number, optional: true },\n\tpremiumCap: { type: Number, optional: true },\n\n\tmealPlan: { type: SimpleSchema.RegEx.Id, optional: true, defaultValue: null },\n\tportion: { type: SimpleSchema.RegEx.Id, optional: true, defaultValue: null },\n\tbundleType: { type: SimpleSchema.RegEx.Id, optional: true, defaultValue: null }\n}), {transform:true});\n\nif (Meteor.isServer) {\n  Meteor.publish('promotions', function() {\n  \treturn Promotions.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const Sides = new Mongo.Collection('sides', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('sides', function() {\n  \treturn Sides.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\nexport const StockCache = new Mongo.Collection('stockCache', {idGeneration: 'MONGO'});\n","import { Mongo } from 'meteor/mongo';\nexport const Surveys = new Mongo.Collection('surveys', {idGeneration: 'MONGO'});\nif (Meteor.isServer) {\n  Meteor.publish('surveys', function() {\n  \treturn Surveys.find();\n  });\n}\n","import { Mongo } from 'meteor/mongo';\n \nexport const TimeSlots = new Mongo.Collection('timeSlots', {idGeneration: 'MONGO'});\n\nif (Meteor.isServer) {\n  Meteor.publish('timeSlots', function() {\n  \treturn TimeSlots.find();\n  });\n}\n","export class EditGuards {\n  constructor(editLists) {\n    this.editGuards = {};\n    this.editLists = editLists;\n  }\n\n  listCollection(name) {\n    return this.editLists[name].collection;\n  }\n  save(object) {\n    var data = _.cloneDeep(object);\n    delete data._id;\n    delete data.$$hashKey;\n    delete data.$$list;\n    this.listCollection(object.$$list).update({_id:object._id}, data);\n  }\n  hasChanges(object) {\n    var currentObject = this.listCollection(object.$$list).findOne({_id:object._id});\n    for (var attr in object) {\n      if (attr == '_id' || attr == '$$hashKey' || attr == '$$list') continue;\n      if (!_.isEqual(object[attr], currentObject[attr])) return true;\n    }\n    return false;\n  }\n  delete(object) {\n    delete this.editGuards[object.$$list][object._id._str];\n    this.listCollection(object.$$list).remove({_id:object._id});\n  }\n  cancel(object) {\n    var currentObject = this.listCollection(object.$$list).findOne({_id:object._id});\n    for (var attr in object) {\n      if (attr == '_id' || attr == '$$hashKey' || attr == '$$list') continue;\n      object[attr] = currentObject[attr];\n    }\n  }\n\n  static filter() {\n    return function(list, controller, name) {\n      var newList = [];\n      if (!controller.editGuards[name]) {\n        controller.editGuards[name] = {};\n      }\n      for (var item of list) {\n        if (!controller.editGuards[name][item._id._str]) {\n          controller.editGuards[name][item._id._str] = _.cloneDeep(item);    \n          controller.editGuards[name][item._id._str].$$list = name;\n\n        }\n        newList.push(controller.editGuards[name][item._id._str]);\n      }\n      return newList;\n    }\n  }\n}\n","function setPropertyPath(obj, prop, value) {\n  if (typeof prop === \"string\")\n      prop = prop.split(\".\");\n\n  if (prop.length > 1) {\n      var e = prop.shift();\n      setPropertyPath(obj[e] =\n               Object.prototype.toString.call(obj[e]) === \"[object Object]\"\n               ? obj[e]\n               : {},\n             prop,\n             value);\n  } else\n      obj[prop[0]] = value;\n}\n\nfunction getPropertyPath(obj, prop) {\n  if (typeof prop === \"string\")\n      prop = prop.split(\".\");\n\n  if (prop.length > 1) {\n      var e = prop.shift();\n      return getPropertyPath(obj[e] =\n               Object.prototype.toString.call(obj[e]) === \"[object Object]\"\n               ? obj[e]\n               : {},\n             prop);\n  } else\n      return obj[prop[0]];\n\n}\n\nexport function mongoProperty(obj, objName, collection, doc, documentProperty, defaultValue) {\n  Object.defineProperty(obj, objName, {\n    configurable: true,\n    get: function() {\n      var _doc = typeof doc == 'function' ? doc() : doc\n      if (_doc) {\n        var r = getPropertyPath(typeof doc == 'function' ? doc() : doc, documentProperty);\n        if (typeof r == 'undefined') {\n          return defaultValue;\n        }\n        else {\n          return r;\n        }\n      }\n    },\n    set: function(value) {\n      var _doc = typeof doc == 'function' ? doc() : doc\n      if (_doc) {\n        setPropertyPath(_doc, documentProperty, value);\n        var data = {};\n        data[documentProperty] = value;\n        collection.update({_id:_doc._id}, {'$set':data});\n      }\n    }\n  });\n}\n","import { MealPlans } from './api/mealPlans';\nimport { Portions } from './api/portions';\nimport { BundleTypes } from './api/bundleTypes';\nimport { Ingredients } from './api/ingredients';\nimport { Meals } from './api/meals';\nimport { AddOns } from './api/addOns';\nimport { TimeSlots } from './api/timeSlots';\nimport { Orders } from './api/orders';\nimport { Surveys } from './api/surveys';\n_ = lodash;\n\nexport class AdminComponent {\n  static collection(collectionName) {\n    return ({\n      'Meals': Meals,\n      'BundleTypes': BundleTypes,\n      'Portions': Portions,\n      'MealPlans': MealPlans,\n      'AddOns': AddOns,\n      'TimeSlots': TimeSlots,\n      'Orders': Orders,\n      'Ingredients': Ingredients,\n      'Surveys': Surveys,\n    })[collectionName];\n  }\n  static collections(...collectionNames) {\n    return _.map(collectionNames, AdminComponent.collection);\n  }\n\tconstructor($scope, $meteor, $reactive, config={}) {\n    $scope.viewModel(this);\n    $reactive(this).attach($scope);\n    this._subscribe = this.subscribe;\n    this.subscriptions = {};\n    this.subscribe = function() {\n      this.loading = true;\n      var count = arguments.length;\n      var timerId = setInterval(() => {\n        console.log('waiting...');\n        if (DDP._allSubscriptionsReady()) {\n          console.log('ready');\n          if (config.onSubscribed) {\n            config.onSubscribed.apply(this);\n          }\n          this.loading = false;\n          $scope.$apply();\n          clearInterval(timerId);\n        }\n      }, 100);\n      var doneLoading = (applyScope=true) => {\n        // console.log(count);\n        // if (!--count) {\n        //   if (config.onSubscribed) {\n        //     config.onSubscribed.apply(this);\n        //   }\n        //   this.loading = false;\n        //   if (applyScope) $scope.$apply();\n        // }\n      }\n      for (let arg of arguments) {\n        this.subscriptions[arg] = this._subscribe(arg, null, {\n          onReady() {\n            doneLoading();\n            if (config.onSubscription && config.onSubscription[arg]) {\n              config.onSubscription[arg]();\n            }\n            $scope.$apply();\n          }\n        });\n        if (this.subscriptions[arg].ready()) {\n          doneLoading(false);\n        }\n      }\n      // console.log(this.subscriptions);\n    }\n    if (config.subscriptions) {\n      this.subscribe.apply(this, config.subscriptions);\n    }\n    if (config.uses) {\n      this.uses.apply(this, config.uses);\n    }\n    if (config.helpers) {\n      this.helpers(config.helpers);\n    }\n  }\n  uses(...features) {\n    for (let feature of features) {\n      switch (feature) {\n        case 'mealPlans':\n          this.subscribe('mealPlans');\n          this.helpers({\n            mealPlans() {\n              return MealPlans.find();\n            }\n          });\n          break;\n\n        case 'portions':\n          this.subscribe('portions');\n          this.helpers({\n            portions() {\n              return Portions.find();\n            }\n          });\n          break;\n\n        case 'bundleTypes':\n          this.subscribe('bundleTypes');\n          this.helpers({\n            bundleTypes() {\n              return BundleTypes.find({}, {sort:{price:1}});\n            }\n          });\n          break;\n\n        case 'ingredients':\n          this.subscribe('ingredients');\n          this.helpers({\n            ingredients() {\n              return Ingredients.find();\n            }\n          });\n          break;\n\n        case 'meals':\n          this.subscribe('meals');\n          this.helpers({\n            meals() {\n              return Meals.find();\n            }\n          });\n          break;\n\n        case 'addOns':\n          this.subscribe('addOns');\n          this.helpers({\n            addOns() {\n              return AddOns.find();\n            }\n          });\n          break;\n\n        case 'timeSlots':\n          this.subscribe('timeSlots');\n          this.helpers({\n            timeSlots() {\n              return TimeSlots.find();\n            }\n          });\n          break;\n      }\n    }\n  }\n  mealPlan(id) {\n    return MealPlans.findOne({_id:id});\n  }\n  portion(id) {\n    return Portions.findOne({_id:id});\n  }\n  bundleType(id) {\n    return BundleTypes.findOne({_id:id});\n  }\n  ingredient(id) {\n    return Ingredients.findOne({_id:id});\n  }\n}\n","import { AdminComponent } from './AdminComponent';\nimport { Deleted } from './api/deleted';\n_ = lodash;\n\nexport class ListAdminComponent extends AdminComponent {\n  delete() {\n    var collection = typeof this.collection == 'string' ? AdminComponent.collection(this.collection) : this.collection;\n    for (var id of this._selected) {\n      var doc = collection.findOne({_id:new Mongo.ObjectID(id)});\n      Deleted.insert({\n        collection: collection._name,\n        timestamp: new Date(),\n        document: doc\n      });\n      collection.remove({_id:doc._id});\n    }\n  }\n\n  get allSelected() {\n    return this._selected.length == this.documents.length;\n  }\n\n  set allSelected(v) {\n    if (v) {\n      if (!this.selected) this.selected = {};\n      for (var doc of this.documents) {\n        this.selected[doc._id._str] = true;\n      }\n    }\n    else {\n      this.selected = {};\n    }\n  }\n\n  get _selected() {\n    return _.transform(this.selected, (selected, value, key) => {\n      if (value) {\n        selected.push(key);\n      }\n    }, [])\n  }\n}","import { addDays, formatDate, today } from './date';\nimport { MealStock } from './api/mealStock';\nimport { mealSales } from './helpers';\n\nexport class StockCalculator {\n  static calculate(initial, date, mealId, api) {\n    var mealStock = api.findMealStock(mealId, date) || {};//MealStock.findOne({meal:mealId, date:date}) || {};\n\n    var sales = mealSales(mealId, date);\n    var output = sales + (mealStock.nonSales || 0);\n    var stock = initial + (mealStock.adjustment || 0) - output + (mealStock.restock || 0);\n\n    return {\n      initial: initial,\n      adjustment: mealStock.adjustment,\n      sales: sales,\n      nonSales: mealStock.nonSales || 0,\n      output: output,\n      restock: mealStock.restock || 0,\n      stock: stock\n    };\n  }\n\n  constructor(mealId) {\n    this.today = formatDate(new Date());\n    this.firstDate = '2016-08-29';\n    this.mealId = mealId;\n    this._calcCache = {};\n    this._mealStockCache = {};\n    this._cache = {};\n  }\n\n  cachedValues(date) {\n    return this._calcCache[date];\n  }\n\n  initCache(date) {\n\n  }\n\n  findMealStock(date) {\n    if (!this._mealStockCache[date]) {\n      this._mealStockCache[date] = MealStock.findOne({meal:this.mealId, date:date});\n    }\n    return this._mealStockCache[date];\n  }\n\n  forDate(date) {\n    date = typeof date == 'string' ? date : formatDate(date);\n\n    if (!this._cache[date]) {\n      this._cache[date] = this._forDate(date);\n    }\n\n    return this._cache[date];\n  }\n\n  _forDate(date) {\n    if (date < formatDate(today())) {\n      return this.findMealStock(date);\n    }\n    var firstDate = formatDate(today());\n    var currentDate = firstDate;\n    var prevDate;\n    while (currentDate <= date) {\n      if (!this._calcCache[currentDate]) {\n        var mealStock = this.findMealStock(currentDate) || {};\n        var initial = currentDate == firstDate ? mealStock.initial : (this._calcCache[prevDate].stock || 0);\n        this._calcCache[currentDate] = StockCalculator.calculate(initial, currentDate, this.mealId, {\n          findMealStock: (mealId, date) => {return this.findMealStock(date)}\n        });\n      }\n      prevDate = currentDate;\n      currentDate = formatDate(addDays(currentDate, 1));\n    }\n    return this._calcCache[date];\n  }\n}\n","export function today() {\n  var now = new Date();\n  return createDay(now.getFullYear(), now.getMonth(), now.getDate());\n}\n\nexport function createDay(year, month, day) {\n  return new Date(year, month, day, 0, 0, 0);\n}\nexport function addDays(date, days) {\n  date = convertToDate(date);\n  return createDay(date.getFullYear(), date.getMonth(), date.getDate() + days);\n}\nexport function firstDayOfMonth(month) {\n  return createDay(month.getFullYear(), month.getMonth(), 1);\n}\nexport function calendarDaysForMonth(month, square=true) {\n  var days = [];\n  var firstDay = firstDayOfMonth(month);\n  if (square) {\n    for (var i = 0; i < 7 - (7 - firstDay.getDay()); ++ i) {\n      days.unshift(addDays(firstDay, -(i + 1)));\n    }    \n  }\n  var day = firstDay;\n  while (day.getMonth() == month.getMonth() || day.getMonth() > month.getMonth() && days.length % 7 && square) {\n    days.push(day);\n    day = addDays(day, 1);\n  }\n  return days;\n}\n\nexport function convertToDate(date: Date|string): Date {\n  if (typeof date == 'string') {\n    return new Date(Date.parse(<string>date + ' 00:00'));\n  }\n  else {\n    return <Date>date;\n  }\n}\n\nexport function formatDate(date) {\n  if (date) {\n    return date.getFullYear() + '-' + _.padStart(date.getMonth() + 1, 2, '0') + '-' + _.padStart(date.getDate(), 2, '0');    \n  }\n}\n\nexport function weeksForMonth(month: Date):Array<Array<Date>> {\n  var days = calendarDaysForMonth(month);\n  var weeks = [];\n  for (var i = 0; i < days.length/7; ++i) {\n    weeks.push(days.slice(i*7, i*7 + 7));\n  }\n  return weeks;\n}\n","_ = lodash;\n\nimport { Orders } from './api/orders';\n\nexport function formatDate(date) {\n\tif (date) {\n\t\treturn date.getFullYear() + '-' + _.padStart(date.getMonth() + 1, 2, '0') + '-' + _.padStart(date.getDate(), 2, '0');\n\t}\n}\n\nexport function amPm(time, appendSuffix=true) {\n  var date = new Date(Date.parse('Jan 1 ' + time));\n  var hours = date.getHours();\n  var suffix = hours >= 12 ? \"pm\":\"am\";\n  hours = ((hours + 11) % 12 + 1); \n\n  return hours + (appendSuffix ? '' + suffix : '');\n}\n\nexport function timeDisplay(time) {\n\tif (time) {\n\t  return amPm(time.start, false) + '-' + amPm(time.end);\t\t\n\t}\n}\n\nexport function mealSales(mealId, date) {\n  var orders = Orders.find({'deliveryOptions.date':date, state:'completed', bundles:{$elemMatch:{mealSelections:{$elemMatch:{'meal._id':mealId}}}}}).fetch();\n  var sales = 0;\n  for (var order of orders) {\n  \tfor (var bundle of order.bundles) {\n  \t\tfor (var mealSelection of bundle.mealSelections) {\n  \t\t\tif (mealSelection.meal._id._str == mealId._str) {\n  \t\t\t\tsales += mealSelection.quantity;\n  \t\t\t\tbreak;\n  \t\t\t}\n  \t\t}\n  \t}\n  }\n  return sales;\n}\n\n\nexport function monthName(month) {\n  switch (month + 1) {\n    case 1: return 'January';\n    case 2: return 'February';\n    case 3: return 'March';\n    case 4: return 'April';\n    case 5: return 'May';\n    case 6: return 'June';\n    case 7: return 'July';\n    case 8: return 'August';\n    case 9: return 'September';\n    case 10: return 'October';\n    case 11: return 'November';\n    case 12: return 'December';\n  }\n}\n","export default {\n  orders: {\n    module: require('./components/orders/list/controller'),\n    template: `<orders></orders>`,\n    path: '/orders',\n    title: 'Orders'\n  },\n  addOrder: {\n    module: require('./components/orders/add/controller'),\n    template: `<addorder></addorder>`,\n    path: '/orders/add',\n    title: 'Add Order'\n  },\n  order: {\n    module: require('./components/orders/view/controller'),\n    template: `<order order=\"$ctrl.order\"></order>`,\n    path: '/orders/:orderId',\n    title: 'Orders'\n  },\n\n  fulfillmentCapacity: {\n    module: require('./components/fulfillment-capacity/controller'),\n    template: `<fulfillmentcapacity></fulfillmentcapacity>`,\n    path: '/fulfillment/capacity',\n    title: 'Fulfillment Capacity'\n  },\n  fulfillmentSchedule: {\n    module: require('./components/fulfillment-schedule/controller'),\n    template: `<fulfillmentschedule></fulfillmentschedule>`,\n    path: '/fulfillment/schedule',\n    title: 'Fulfillment Schedule'\n  },\n  fulfillmentCharges: {\n    module: require('./components/fulfillment-charges/controller'),\n    template: `<fulfillmentcharges></fulfillmentcharges>`,\n    path: '/fulfillment/charges',\n    title: 'Fulfillment Charges'\n  },\n  fulfillmentSettings: {\n    module: require('./components/fulfillment-settings/controller'),\n    template: `<fulfillmentsettings></fulfillmentsettings>`,\n    path: '/fulfillment/settings',\n    title: 'Fulfillment Settings'\n  },\n  \n  inventoryStatus: {\n    module: require('./components/inventory-status/controller'),\n    template: `<inventorystatus></inventorystatus>`,\n    path: '/inventory/status',\n    title: 'Inventory Status',\n    sub: [\n      {path:'/inventory/status/overview', params:{view:'overview'}},\n      {path:'/inventory/status/adjustment', params:{view:'adjustment'}},\n      {path:'/inventory/status/non-sales', params:{view:'nonSales'}},\n      {path:'/inventory/status/restock', params:{view:'restock'}},\n    ]\n  },\n\n  promotions: {\n    module: require('./components/promotions/list/controller'),\n    template: `<promotions></promotions>`,\n    path: '/promotions',\n    title: 'Promotion'\n  },\n  editPromotion: {\n    module: require('./components/promotions/edit/controller'),\n    template: `<editpromotion promotion-id=\"$ctrl.param('promotionId')\"></editpromotion>`,\n    path: '/promotions/:promotionId/edit',\n    title: 'Edit Promotion'\n  },\n  addPromotion: {\n    module: require('./components/promotions/add/controller'),\n    template: `<addpromotion></addpromotion>`,\n    path: '/promotions/add',\n    title: 'Add Promotion'\n  },\n\n  meals: {\n    module: require('./components/meals/list/controller'), \n    template: `<meals></meals>`,\n    path: '/products/meals',\n    title: 'Meals'\n  },\n  editMeal: {\n    module: require('./components/meals/edit/controller'),\n    template: `<editmeal mealid=\"$ctrl.param('mealId')\"></editmeal>`,\n    path: '/products/meals/:mealId/edit',\n    title: 'Edit Meal'\n  },\n  addMeal: {\n    module: require('./components/meals/add/controller'),\n    template: `<addmeal></addmeal>`,\n    path: '/products/meals/add',\n    title: 'Add Meal'\n  },\n\n  sides: {\n    module: require('./components/sides/list/controller'),\n    template: `<sides></sides>`,\n    path: '/products/sides',\n    title: 'Sides'\n  },\n  editSide: {\n    module: require('./components/sides/edit/controller'),\n    template: `<editside sideid=\"$ctrl.param('sideId')\"></editside>`,\n    path: '/products/sides/:sideId/edit',\n    title: 'Edit Side'\n  },\n  addSide: {\n    module: require('./components/sides/add/controller'),\n    template: `<addside></addside>`,\n    path: '/products/sides/add',\n    title: 'Add Side'\n  },\n\n  ingredients: {\n    module: require('./components/ingredients/list/controller'),\n    template: `<ingredients></ingredients>`,\n    path: '/products/ingredients',\n    title: 'Ingredients'\n  },\n  editIngredient: {\n    module: require('./components/ingredients/edit/controller'),\n    template: `<editingredient ingredientid=\"$ctrl.param('ingredientId')\"></editingredient>`,\n    path: '/products/ingredients/:ingredientId/edit',\n    title: 'Edit Ingredient'\n  },\n  addIngredient: {\n    module: require('./components/ingredients/add/controller'),\n    template: `<addingredient></addingredient>`,\n    path: '/products/ingredients/add',\n    title: 'Add Ingredient'\n  },\n\n  mealPlans: {\n    module: require('./components/meal-plans/list/controller'),\n    template: `<mealplans></mealplans>`,\n    path: '/products/meal-plans',\n    title: 'Meal Plans'\n  },\n  editMealPlan: {\n    module: require('./components/meal-plans/edit/controller'),\n    template: `<editmealplan mealplanid=\"$ctrl.param('mealPlanId')\"></editmealplan>`,\n    path: '/products/meal-plans/:mealPlanId/edit',\n    title: 'Edit Meal Plan'\n  },\n  addMealPlan: {\n    module: require('./components/meal-plans/add/controller'),\n    template: `<addmealplan></addmealplan>`,\n    path: '/products/meal-plans/add',\n    title: 'Add Meal Plan'\n  },\n\n  portions: {\n    module: require('./components/portions/list/controller'),\n    template: `<portions></portions>`,\n    path: '/products/portions',\n    title: 'Portions'\n  },\n  editPortion: {\n    module: require('./components/portions/edit/controller'),\n    template: `<editportion portion-id=\"$ctrl.param('portionId')\"></editportion>`,\n    path: '/products/portions/:portionId/edit',\n    title: 'Edit Portion'\n  },\n  addPortion: {\n    module: require('./components/portions/add/controller'),\n    template: `<addportion></addportion>`,\n    path: '/products/portions/add',\n    title: 'Add Portion'\n  },\n\n  bundleTypes: {\n    module: require('./components/bundle-types/list/controller'),\n    template: `<bundletypes></bundletypes>`,\n    path: '/products/bundle-types',\n    title: 'Bundle Types'\n  },\n  editBundleType: {\n    module: require('./components/bundle-types/edit/controller'),\n    template: `<editbundletype bundle-type-id=\"$ctrl.param('bundleTypeId')\"></editbundletype>`,\n    path: '/products/bundle-types/:bundleTypeId/edit',\n    title: 'Edit Bundle Type'\n  },\n  addBundleType: {\n    module: require('./components/bundle-types/add/controller'),\n    template: `<addbundletype></addbundletype>`,\n    path: '/products/bundle-types/add',\n    title: 'Add Bundle Type'\n  },\n\n  addOns: {\n    module: require('./components/add-ons/list/controller'),\n    template: `<addons></addons>`,\n    path: '/products/add-ons',\n    title: 'Add-ons'\n  },\n  editAddOn: {\n    module: require('./components/add-ons/edit/controller'),\n    template: `<editaddon add-on-id=\"$ctrl.param('addOnId')\"></editaddon>`,\n    path: '/products/add-ons/:addOnId/edit',\n    title: 'Edit Add-on'\n  },\n  addAddOn: {\n    module: require('./components/add-ons/add/controller'),\n    template: `<addaddon></addaddon>`,\n    path: '/products/add-ons/add',\n    title: 'Add Add-on'\n  },\n\n  partners: {\n    module: require('./components/partners/list/controller'),\n    template: `<partners></partners>`,\n    path: '/partners',\n    title: 'Partners'\n  },\n  editPartner: {\n    module: require('./components/partners/edit/controller'),\n    template: `<editpartner partner-id=\"$ctrl.param('partnerId')\"></editpartner>`,\n    path: '/partners/:partnerId/edit',\n    title: 'Edit Partner'\n  },\n  addPartner: {\n    module: require('./components/partners/add/controller'),\n    template: `<addpartner></addpartner>`,\n    path: '/partners/add',\n    title: 'Add Partner'\n  },\n\n  anomalyTriggers: {\n    module: require('./components/anomaly-triggers/list/controller'),\n    template: `<anomalytriggers></anomalytriggers>`,\n    path: '/inventory/anomaly-triggers',\n    title: 'Anomaly Triggers'\n  },\n\n  users: {\n    module: require('./components/users/list/controller'), \n    template: `<users></users>`,\n    path: '/users',\n    title: 'Users'\n  },\n  user: {\n    module: require('./components/users/view/controller'),\n    template: `<user user-id=\"$ctrl.param('userId')\"></user>`,\n    path: '/users/:userId',\n    title: 'User'\n  },\n  // addMeal: {\n  //   module: require('./components/meals/add/controller'),\n  //   template: `<addmeal></addmeal>`,\n  //   path: '/products/meals/add',\n  //   title: 'Add Meal'\n  // },\n\n};\n","\n            Meteor.startup(function() {\n              var attrs = {};\n              for (var prop in attrs) {\n                document.body.setAttribute(prop, attrs[prop]);\n              }\n            });\n          ","import angular from 'angular';\nimport angularMeteor from 'angular-meteor';\nimport admin from '../imports/components/admin/controller';\nimport pages from '../imports/pages';\n_ = lodash;\nMeteor.startup(() => {\n  angular.module('app', [\n    angularMeteor,\n    admin.name,\n  ]);\n});\n\nFlowRouter.route('/', {\n  name: 'root'\n});\n\nfor (var pageName in pages) {\n  var page = pages[pageName];\n  FlowRouter.route(page.path, {\n    name: pageName,\n  });\n  if (page.sub) {\n    for (var subPage of page.sub) {\n      FlowRouter.route(subPage.path, _.merge({\n        name: pageName,\n      }, subPage.params));\n    }\n  }\n}\n"]}